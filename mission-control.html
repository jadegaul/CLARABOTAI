<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission Control | Jade Gaul</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ============================================
           CSS VARIABLES & THEME
           ============================================ */
        :root {
            /* Core Colors */
            --bg-primary: #050508;
            --bg-secondary: rgba(255, 255, 255, 0.03);
            --bg-card: rgba(255, 255, 255, 0.04);
            --bg-hover: rgba(255, 255, 255, 0.08);
            
            /* Accent - Pink */
            --accent-primary: #ff6b9d;
            --accent-secondary: #ff8fab;
            --accent-glow: rgba(255, 107, 157, 0.4);
            
            /* Text */
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-muted: rgba(255, 255, 255, 0.5);
            
            /* Borders */
            --border-subtle: rgba(255, 255, 255, 0.06);
            --border-active: rgba(255, 107, 157, 0.5);
            
            /* Status Colors */
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            
            /* Priority Colors */
            --priority-high: #ef4444;
            --priority-medium: #f59e0b;
            --priority-low: #10b981;
            
            /* Spacing */
            --spacing-xs: 0.5rem;
            --spacing-sm: 0.75rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 2.5rem;
            
            /* Transitions */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.25s ease;
            --transition-slow: 0.4s ease;
            
            /* Glass */
            --glass-blur: blur(20px);
            --glass-bg: rgba(255, 255, 255, 0.05);
        }

        /* ============================================
           RESET & BASE
           ============================================ */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-subtle);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* ============================================
           ANIMATIONS
           ============================================ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 var(--accent-glow);
            }
            50% {
                box-shadow: 0 0 0 8px rgba(255, 107, 157, 0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .animate-fadeInUp {
            animation: fadeInUp 0.5s var(--transition-normal) forwards;
        }

        .animate-pulse {
            animation: pulse 2s infinite;
        }

        .stagger-1 { animation-delay: 0.1s; }
        .stagger-2 { animation-delay: 0.2s; }
        .stagger-3 { animation-delay: 0.3s; }
        .stagger-4 { animation-delay: 0.4s; }

        /* ============================================
           HEADER
           ============================================ */
        .header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border-bottom: 1px solid var(--border-subtle);
            padding: var(--spacing-md) var(--spacing-2xl);
        }

        .header-inner {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--spacing-xl);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-weight: 700;
            font-size: 1.25rem;
            letter-spacing: -0.02em;
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .nav-tabs {
            display: flex;
            gap: var(--spacing-xs);
            background: var(--bg-secondary);
            padding: var(--spacing-xs);
            border-radius: 12px;
            border: 1px solid var(--border-subtle);
        }

        .nav-tab {
            padding: var(--spacing-sm) var(--spacing-md);
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            border-radius: 8px;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-tab:hover {
            color: var(--text-primary);
            background: var(--bg-hover);
        }

        .nav-tab.active {
            color: var(--text-primary);
            background: var(--accent-primary);
            box-shadow: 0 4px 14px rgba(255, 107, 157, 0.3);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .search-box {
            position: relative;
        }

        .search-input {
            width: 240px;
            padding: var(--spacing-sm) var(--spacing-md);
            padding-left: 2.5rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9rem;
            transition: all var(--transition-fast);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px var(--accent-glow);
            width: 280px;
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-sm);
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-dot.offline {
            background: var(--danger);
            animation: none;
        }

        /* Server Status Indicator */
        .server-status {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-sm);
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            font-size: 0.75rem;
            color: var(--text-secondary);
            transition: all var(--transition-fast);
        }

        .server-status.online {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.1);
        }

        .server-status.offline {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
        }

        .server-status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--text-muted);
            transition: all var(--transition-fast);
        }

        .server-status.online .server-status-dot {
            background: var(--success);
            box-shadow: 0 0 6px var(--success);
        }

        .server-status.offline .server-status-dot {
            background: var(--danger);
        }

        /* Weather Display */
        .weather-display {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-sm);
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            min-width: 100px;
        }

        .weather-icon {
            font-size: 1rem;
        }

        .weather-temp {
            font-weight: 600;
            color: var(--text-primary);
        }

        .weather-condition {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* ============================================
           MAIN CONTENT
           ============================================ */
        .main-content {
            max-width: 1600px;
            margin: 0 auto;
            padding: var(--spacing-2xl);
        }

        .tab-content {
            display: none;
            opacity: 0;
            transition: opacity var(--transition-normal);
        }

        .tab-content.active {
            display: block;
            opacity: 1;
        }

        /* ============================================
           DASHBOARD TAB
           ============================================ */
        .welcome-bar {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
            position: relative;
            overflow: hidden;
        }

        .welcome-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
        }

        .welcome-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .welcome-title {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
            letter-spacing: -0.02em;
        }

        .welcome-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .live-datetime {
            text-align: right;
        }

        .live-time {
            font-size: 2rem;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
            letter-spacing: -0.02em;
        }

        .live-date {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        @media (max-width: 1200px) {
            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            .welcome-content {
                flex-direction: column;
                align-items: flex-start;
            }
            .live-datetime {
                margin-top: var(--spacing-md);
                text-align: left;
            }
        }

        .metric-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: var(--spacing-lg);
            position: relative;
            overflow: hidden;
            transition: all var(--transition-normal);
            animation: fadeInUp 0.5s var(--transition-normal) forwards;
            opacity: 0;
        }

        .metric-card:hover {
            transform: translateY(-4px);
            border-color: var(--border-active);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
        }

        .metric-card.income::before { background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); }
        .metric-card.projects::before { background: linear-gradient(90deg, var(--info), #60a5fa); }
        .metric-card.tasks::before { background: linear-gradient(90deg, var(--warning), #fbbf24); }
        .metric-card.goal::before { background: linear-gradient(90deg, var(--success), #34d399); }

        .metric-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: var(--spacing-md);
        }

        .metric-card.income .metric-icon { background: rgba(255, 107, 157, 0.15); }
        .metric-card.projects .metric-icon { background: rgba(59, 130, 246, 0.15); }
        .metric-card.tasks .metric-icon { background: rgba(245, 158, 11, 0.15); }
        .metric-card.goal .metric-icon { background: rgba(16, 185, 129, 0.15); }

        .metric-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--spacing-xs);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: var(--spacing-xs);
        }

        .metric-trend {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.875rem;
        }

        .metric-trend.up { color: var(--success); }
        .metric-trend.down { color: var(--danger); }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-lg);
        }

        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: var(--spacing-lg);
            animation: fadeInUp 0.5s var(--transition-normal) forwards;
            opacity: 0;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-md);
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .btn {
            padding: var(--spacing-sm) var(--spacing-md);
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .btn-primary {
            background: var(--accent-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-secondary);
            transform: translateY(-1px);
            box-shadow: 0 4px 14px rgba(255, 107, 157, 0.3);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-subtle);
        }

        .btn-secondary:hover {
            background: var(--bg-hover);
        }

        .btn-sm { padding: 0.375rem 0.75rem; font-size: 0.8rem; }

        .activity-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) 0;
            border-bottom: 1px solid var(--border-subtle);
        }

        .activity-item:last-child { border-bottom: none; }

        .activity-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .activity-time {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .priority-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .priority-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            transition: all var(--transition-fast);
        }

        .priority-item:hover {
            background: var(--bg-hover);
        }

        .priority-item.completed .priority-text {
            text-decoration: line-through;
            color: var(--text-muted);
        }

        .priority-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid var(--border-subtle);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all var(--transition-fast);
        }

        .priority-checkbox:hover {
            border-color: var(--accent-primary);
        }

        .priority-checkbox.checked {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
        }

        .priority-checkbox.checked::after {
            content: '✓';
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .priority-text {
            flex: 1;
            font-size: 0.9rem;
        }

        .priority-delete {
            color: var(--text-muted);
            cursor: pointer;
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .priority-item:hover .priority-delete {
            opacity: 1;
        }

        .priority-delete:hover {
            color: var(--danger);
        }

        .empty-state {
            text-align: center;
            padding: var(--spacing-xl);
            color: var(--text-muted);
        }

        /* ============================================
           KANBAN BOARD
           ============================================ */
        .kanban-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-lg);
            min-height: 500px;
        }

        @media (max-width: 1024px) {
            .kanban-board {
                grid-template-columns: 1fr;
            }
        }

        .kanban-column {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: var(--spacing-md);
            display: flex;
            flex-direction: column;
            min-height: 400px;
        }

        .kanban-column-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-sm) var(--spacing-xs);
            margin-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--border-subtle);
        }

        .kanban-column-title {
            font-weight: 600;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .kanban-count {
            background: var(--bg-hover);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .kanban-tasks {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            overflow-y: auto;
            max-height: 500px;
            padding-right: var(--spacing-xs);
        }

        .kanban-task {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: var(--spacing-md);
            cursor: pointer;
            transition: all var(--transition-fast);
            position: relative;
        }

        .kanban-task:hover {
            border-color: var(--border-active);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }

        .kanban-task-title {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: var(--spacing-xs);
            line-height: 1.4;
        }

        .kanban-task-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-sm);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .kanban-task-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .priority-badge {
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 500;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .priority-badge.high {
            background: rgba(239, 68, 68, 0.2);
            color: var(--priority-high);
        }

        .priority-badge.medium {
            background: rgba(245, 158, 11, 0.2);
            color: var(--priority-medium);
        }

        .priority-badge.low {
            background: rgba(16, 185, 129, 0.2);
            color: var(--priority-low);
        }

        .kanban-add-btn {
            width: 100%;
            padding: var(--spacing-sm);
            background: transparent;
            border: 2px dashed var(--border-subtle);
            border-radius: 10px;
            color: var(--text-muted);
            font-family: inherit;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-top: var(--spacing-sm);
        }

        .kanban-add-btn:hover {
            border-color: var(--accent-primary);
            color: var(--accent-primary);
            background: rgba(255, 107, 157, 0.05);
        }

        .kanban-task-delete {
            position: absolute;
            top: var(--spacing-sm);
            right: var(--spacing-sm);
            width: 20px;
            height: 20px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            opacity: 0;
            transition: all var(--transition-fast);
            cursor: pointer;
        }

        .kanban-task:hover .kanban-task-delete {
            opacity: 1;
        }

        .kanban-task-delete:hover {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            transition: opacity var(--transition-normal);
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: var(--spacing-xl);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform var(--transition-normal);
        }

        .modal-overlay.active .modal {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-lg);
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-muted);
            transition: all var(--transition-fast);
        }

        .modal-close:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .form-group {
            margin-bottom: var(--spacing-md);
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: var(--spacing-xs);
            color: var(--text-secondary);
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9rem;
            transition: all var(--transition-fast);
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-actions {
            display: flex;
            gap: var(--spacing-sm);
            justify-content: flex-end;
            margin-top: var(--spacing-lg);
        }

        /* ============================================
           REVENUE TAB
           ============================================ */
        .revenue-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-lg);
        }

        @media (max-width: 1024px) {
            .revenue-grid {
                grid-template-columns: 1fr;
            }
        }

        .revenue-gauge {
            position: relative;
            width: 150px;
            height: 150px;
            flex-shrink: 0;
        }

        .gauge-svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .gauge-bg {
            fill: none;
            stroke: var(--bg-secondary);
            stroke-width: 10;
        }

        .gauge-fill {
            fill: none;
            stroke: var(--accent-primary);
            stroke-width: 10;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s ease;
        }

        .gauge-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .gauge-value span {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--accent-primary);
        }

        .revenue-progress-text {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        .revenue-progress-text strong {
            color: var(--accent-primary);
            font-size: 1.25rem;
        }

        .revenue-stat {
            background: var(--bg-secondary);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: 10px;
            min-width: 140px;
        }

        .revenue-stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .revenue-stat-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-top: 0.25rem;
        }

        .revenue-chart {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            gap: var(--spacing-sm);
            height: 200px;
            padding: var(--spacing-md) 0;
        }

        .chart-bar-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .chart-bar {
            width: 100%;
            background: linear-gradient(to top, var(--accent-primary), var(--accent-secondary));
            border-radius: 4px 4px 0 0;
            transition: height 0.5s ease;
            min-height: 4px;
            position: relative;
        }

        .chart-bar:hover::after {
            content: attr(data-value);
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-hover);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            white-space: nowrap;
        }

        .chart-label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .revenue-chart-legend {
            display: flex;
            justify-content: center;
            gap: var(--spacing-md);
            margin-top: var(--spacing-sm);
            padding-top: var(--spacing-sm);
            border-top: 1px solid var(--border-subtle);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .client-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            max-height: 400px;
            overflow-y: auto;
        }

        .client-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            transition: all var(--transition-fast);
        }

        .client-item:hover {
            background: var(--bg-hover);
            border-color: var(--border-active);
        }

        .client-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .client-status.active { background: var(--success); }
        .client-status.pending { background: var(--warning); }
        .client-status.churned { background: var(--danger); }

        .client-info {
            flex: 1;
        }

        .client-name {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .client-meta {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .client-value {
            font-weight: 700;
            color: var(--accent-primary);
        }

        .client-actions {
            display: flex;
            gap: var(--spacing-xs);
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .client-item:hover .client-actions {
            opacity: 1;
        }

        .client-btn {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: transparent;
            border: none;
            color: var(--text-muted);
            transition: all var(--transition-fast);
        }

        .client-btn:hover {
            background: var(--bg-card);
            color: var(--text-primary);
        }

        .client-btn.delete:hover {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        /* ============================================
           TIMELINE ROADMAP
           ============================================ */
        .timeline-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .timeline-phase {
            position: relative;
            padding-left: 3rem;
            padding-bottom: var(--spacing-xl);
            border-left: 2px solid var(--border-subtle);
            margin-left: 1rem;
            transition: all var(--transition-normal);
        }

        .timeline-phase:last-child {
            border-left: 2px solid transparent;
            padding-bottom: 0;
        }

        .timeline-phase.active {
            border-left-color: var(--accent-primary);
        }

        .timeline-phase.active .timeline-dot {
            background: var(--accent-primary);
            box-shadow: 0 0 20px var(--accent-glow);
        }

        .timeline-dot {
            position: absolute;
            left: -0.5rem;
            top: 0;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            background: var(--bg-hover);
            border: 2px solid var(--border-subtle);
            transition: all var(--transition-normal);
        }

        .timeline-phase.active .timeline-dot {
            border-color: var(--accent-primary);
        }

        .timeline-phase.completed .timeline-dot {
            background: var(--success);
            border-color: var(--success);
        }

        .timeline-phase.completed .timeline-dot::after {
            content: '✓';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.6rem;
            color: white;
            font-weight: bold;
        }

        .timeline-content {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: var(--spacing-lg);
            position: relative;
            transition: all var(--transition-normal);
        }

        .timeline-phase.active .timeline-content {
            border-color: var(--border-active);
            box-shadow: 0 0 30px rgba(255, 107, 157, 0.15);
        }

        .timeline-phase.completed .timeline-content {
            opacity: 0.7;
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-sm);
        }

        .timeline-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
        }

        .timeline-date {
            font-size: 0.875rem;
            color: var(--text-secondary);
            background: var(--bg-secondary);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 20px;
        }

        .timeline-desc {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: var(--spacing-md);
            line-height: 1.5;
        }

        .timeline-milestones {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .timeline-milestone {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            background: var(--bg-secondary);
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all var(--transition-fast);
        }

        .timeline-milestone:hover {
            background: var(--bg-hover);
        }

        .milestone-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid var(--border-subtle);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all var(--transition-fast);
        }

        .milestone-checkbox:hover {
            border-color: var(--accent-primary);
        }

        .milestone-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
        }

        .milestone-checkbox.checked::after {
            content: '✓';
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .milestone-text {
            flex: 1;
        }

        .milestone-text.completed {
            text-decoration: line-through;
            color: var(--text-muted);
        }

        .timeline-badge {
            position: absolute;
            top: var(--spacing-md);
            right: var(--spacing-md);
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .timeline-badge.current {
            background: rgba(255, 107, 157, 0.2);
            color: var(--accent-primary);
        }

        .timeline-badge.completed {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .timeline-badge.upcoming {
            background: rgba(59, 130, 246, 0.2);
            color: var(--info);
        }

        /* ============================================
           COMMAND CENTER - AGENTS
           ============================================ */
        .agents-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        @media (max-width: 1024px) {
            .agents-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .agents-grid {
                grid-template-columns: 1fr;
            }
        }

        .agent-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: var(--spacing-lg);
            cursor: pointer;
            transition: all var(--transition-normal);
            position: relative;
            animation: fadeInUp 0.5s var(--transition-normal) forwards;
            opacity: 0;
        }

        .agent-card:hover {
            transform: translateY(-4px);
            border-color: var(--border-active);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .agent-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 16px 16px 0 0;
        }

        .agent-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }

        .agent-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .agent-info {
            flex: 1;
        }

        .agent-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .agent-role {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .agent-status {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            margin-top: var(--spacing-xs);
        }

        .agent-status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .agent-status-dot.online {
            background: var(--success);
            box-shadow: 0 0 8px var(--success);
        }

        .agent-status-dot.busy {
            background: var(--warning);
            box-shadow: 0 0 8px var(--warning);
        }

        .agent-status-dot.offline {
            background: var(--danger);
        }

        .agent-model {
            font-size: 0.75rem;
            color: var(--text-muted);
            background: var(--bg-secondary);
            padding: 2px 8px;
            border-radius: 4px;
            display: inline-block;
            margin-top: var(--spacing-xs);
        }

        .agent-last-active {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: var(--spacing-xs);
        }

        /* Slide-out Panel */
        .slide-out-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(3px);
            z-index: 1999;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-normal);
        }

        .slide-out-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .slide-out-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 100%;
            max-width: 400px;
            height: 100vh;
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border-left: 1px solid var(--border-subtle);
            z-index: 2000;
            transition: right var(--transition-slow);
            display: flex;
            flex-direction: column;
        }

        .slide-out-panel.active {
            right: 0;
        }

        .slide-out-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border-subtle);
        }

        .slide-out-header h3 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
        }

        .agent-status-badge {
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .agent-status-badge.online {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .agent-status-badge.busy {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }

        .agent-status-badge.offline {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        .slide-out-content {
            flex: 1;
            overflow-y: auto;
            padding: var(--spacing-lg);
        }

        .panel-section {
            margin-bottom: var(--spacing-lg);
        }

        .panel-section h4 {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--spacing-xs);
        }

        .panel-section p {
            font-size: 0.9rem;
            color: var(--text-primary);
            line-height: 1.5;
        }

        .capabilities-list {
            list-style: none;
            padding: 0;
        }

        .capabilities-list li {
            font-size: 0.9rem;
            padding: var(--spacing-xs) 0;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .capabilities-list li::before {
            content: '✓';
            color: var(--success);
            font-weight: bold;
        }

        .capabilities-list li:last-child {
            border-bottom: none;
        }

        .agent-activity-log {
            max-height: 200px;
            overflow-y: auto;
        }

        .activity-log-entry {
            padding: var(--spacing-xs) 0;
            border-bottom: 1px solid var(--border-subtle);
            font-size: 0.85rem;
        }

        .activity-log-entry:last-child {
            border-bottom: none;
        }

        .activity-log-time {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .panel-footer {
            padding: var(--spacing-lg);
            border-top: 1px solid var(--border-subtle);
        }

        /* Executive Decisions */
        .decisions-section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: var(--spacing-lg);
            animation: fadeInUp 0.5s var(--transition-normal) forwards;
            opacity: 0;
        }

        .decisions-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--border-subtle);
        }

        .decisions-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .decision-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: var(--spacing-md);
            transition: all var(--transition-fast);
        }

        .decision-card:hover {
            border-color: var(--border-active);
        }

        .decision-date {
            font-size: 0.75rem;
            color: var(--accent-primary);
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .decision-question {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: var(--spacing-xs);
        }

        .decision-made {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-sm);
        }

        .decision-agents {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            flex-wrap: wrap;
        }

        .decision-agent-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--bg-hover);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
        }

        .decision-agents-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-right: var(--spacing-xs);
        }

        .decision-agent-name {
            font-size: 0.75rem;
            color: var(--text-secondary);
            background: var(--bg-hover);
            padding: 2px 8px;
            border-radius: 12px;
        }

        /* ============================================
           INTEL TAB STYLES
           ============================================ */
        .intel-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .daily-brief {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
            position: relative;
            overflow: hidden;
        }

        .daily-brief::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ef4444, #f59e0b, #3b82f6);
        }

        /* Google Alerts Section Styles */
        .google-alerts-section {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05));
            border: 2px solid rgba(59, 130, 246, 0.5);
            border-radius: 16px;
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.5s var(--transition-normal);
        }

        .google-alerts-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
        }

        .google-alerts-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-md);
        }

        .google-alerts-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--info);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .google-alerts-date {
            font-size: 0.875rem;
            color: var(--text-secondary);
            background: var(--bg-secondary);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 20px;
        }

        .google-alerts-items {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .google-alert-item {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            transition: all var(--transition-fast);
        }

        .google-alert-item:hover {
            border-color: var(--info);
            background: var(--bg-hover);
            transform: translateX(4px);
        }

        .google-alert-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
            color: var(--info);
        }

        .google-alert-content {
            flex: 1;
        }

        .google-alert-title {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 0.25rem;
        }

        .google-alert-title a {
            color: var(--text-primary);
            text-decoration: none;
        }

        .google-alert-title a:hover {
            color: var(--info);
        }

        .google-alert-source {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .daily-brief-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-md);
        }

        .daily-brief-title {
            font-size: 1.25rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .daily-brief-date {
            font-size: 0.875rem;
            color: var(--text-secondary);
            background: var(--bg-secondary);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 20px;
        }

        .brief-items {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .brief-item {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm);
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            transition: all var(--transition-fast);
        }

        .brief-item:hover {
            border-color: var(--border-active);
            background: var(--bg-hover);
        }

        .brief-item.google-alert {
            border-color: rgba(59, 130, 246, 0.5);
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05));
        }

        .brief-item.google-alert:hover {
            border-color: var(--info);
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(59, 130, 246, 0.08));
        }

        .brief-item-importance {
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .brief-item-content {
            flex: 1;
        }

        .brief-item-title {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 0.25rem;
        }

        .brief-item-title a {
            color: var(--text-primary);
            text-decoration: none;
        }

        .brief-item-title a:hover {
            color: var(--accent-primary);
        }

        .brief-item-summary {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .intel-filters {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
            align-items: center;
        }

        .intel-category-tabs {
            display: flex;
            gap: var(--spacing-xs);
            background: var(--bg-secondary);
            padding: var(--spacing-xs);
            border-radius: 12px;
            border: 1px solid var(--border-subtle);
        }

        .intel-category-tab {
            padding: var(--spacing-sm) var(--spacing-md);
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            border-radius: 8px;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .intel-category-tab:hover {
            color: var(--text-primary);
            background: var(--bg-hover);
        }

        .intel-category-tab.active {
            color: var(--text-primary);
            background: var(--accent-primary);
            box-shadow: 0 4px 14px rgba(255, 107, 157, 0.3);
        }

        .intel-importance-filters {
            display: flex;
            gap: var(--spacing-xs);
        }

        .importance-btn {
            padding: var(--spacing-xs) var(--spacing-sm);
            border: 1px solid var(--border-subtle);
            background: var(--bg-secondary);
            color: var(--text-secondary);
            font-family: inherit;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            border-radius: 8px;
            transition: all var(--transition-fast);
        }

        .importance-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .importance-btn.active {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .clear-filters-btn {
            padding: var(--spacing-xs) var(--spacing-sm);
            border: 1px solid var(--border-subtle);
            background: transparent;
            color: var(--text-muted);
            font-family: inherit;
            font-size: 0.8rem;
            cursor: pointer;
            border-radius: 8px;
            transition: all var(--transition-fast);
        }

        .clear-filters-btn:hover {
            color: var(--danger);
            border-color: var(--danger);
        }

        .intel-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-lg);
        }

        @media (max-width: 1200px) {
            .intel-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .intel-grid {
                grid-template-columns: 1fr;
            }
            .intel-filters {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        .intel-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: var(--spacing-lg);
            transition: all var(--transition-normal);
            position: relative;
            animation: fadeInUp 0.5s var(--transition-normal) forwards;
            opacity: 0;
        }

        .intel-card:hover {
            transform: translateY(-4px);
            border-color: var(--border-active);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .intel-card-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: var(--spacing-sm);
        }

        .intel-card-badges {
            display: flex;
            gap: var(--spacing-xs);
            flex-wrap: wrap;
        }

        .intel-category-badge {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .intel-category-badge.ai-news {
            background: rgba(139, 92, 246, 0.2);
            color: #8b5cf6;
        }

        .intel-category-badge.google-alerts {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .intel-category-badge.industry-trends {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .intel-category-badge.competitor-watch {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .intel-category-badge.opportunities {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .intel-importance-badge {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .intel-importance-badge.hot {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .intel-importance-badge.notable {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .intel-importance-badge.reference {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }

        .intel-card-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
            line-height: 1.4;
        }

        .intel-card-title a {
            color: var(--text-primary);
            text-decoration: none;
        }

        .intel-card-title a:hover {
            color: var(--accent-primary);
        }

        .intel-card-summary {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: var(--spacing-md);
        }

        .intel-card-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-top: var(--spacing-sm);
            border-top: 1px solid var(--border-subtle);
        }

        .intel-card-date {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .intel-card-actions {
            display: flex;
            gap: var(--spacing-xs);
        }

        .intel-card-btn {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: transparent;
            border: none;
            color: var(--text-muted);
            transition: all var(--transition-fast);
        }

        .intel-card-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .intel-card-btn.delete:hover {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }

        .add-intel-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--accent-primary);
            color: white;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(255, 107, 157, 0.4);
            transition: all var(--transition-normal);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .add-intel-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(255, 107, 157, 0.5);
        }

        .radio-group {
            display: flex;
            gap: var(--spacing-md);
            flex-wrap: wrap;
        }

        .radio-label {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .radio-label input[type="radio"] {
            accent-color: var(--accent-primary);
        }

        /* ============================================
           YOUTUBE TAB STYLES
           ============================================ */
        .youtube-growth-card {
            margin-bottom: var(--spacing-xl);
            animation: fadeInUp 0.5s var(--transition-normal) forwards;
        }

        .growth-tracker-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-lg);
        }

        @media (max-width: 768px) {
            .growth-tracker-content {
                grid-template-columns: 1fr;
            }
        }

        .subscriber-section {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .subscriber-input-group {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .subscriber-input-group label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .subscriber-input {
            width: 150px;
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
        }

        .subscriber-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }

        .milestone-display {
            margin-top: var(--spacing-sm);
        }

        .current-milestone {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-primary);
            margin-bottom: var(--spacing-xs);
        }

        .next-milestone {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .progress-section {
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: var(--spacing-sm);
        }

        .xp-progress-bar {
            width: 100%;
            height: 24px;
            background: var(--bg-secondary);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .xp-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), #ff4d8d);
            border-radius: 12px;
            transition: width 0.5s ease;
            box-shadow: 0 0 20px rgba(255, 107, 157, 0.4);
        }

        .progress-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .youtube-stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-md);
            margin-top: var(--spacing-md);
            grid-column: 1 / -1;
        }

        .youtube-stat {
            background: var(--bg-secondary);
            padding: var(--spacing-md);
            border-radius: 10px;
            text-align: center;
        }

        .youtube-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-primary);
        }

        .youtube-stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 4px;
        }

        /* Video Pipeline */
        .youtube-pipeline {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-xl);
            min-height: 400px;
        }

        @media (max-width: 1200px) {
            .youtube-pipeline {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .youtube-pipeline {
                grid-template-columns: 1fr;
            }
        }

        .pipeline-column {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: var(--spacing-md);
            display: flex;
            flex-direction: column;
            min-height: 300px;
        }

        .pipeline-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-bottom: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
            border-bottom: 1px solid var(--border-subtle);
        }

        .pipeline-title {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .pipeline-count {
            background: var(--bg-hover);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .pipeline-tasks {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            overflow-y: auto;
            max-height: 350px;
        }

        .video-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: var(--spacing-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
            position: relative;
        }

        .video-card:hover {
            border-color: var(--border-active);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .video-card-title {
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: var(--spacing-xs);
            line-height: 1.3;
        }

        .video-card-topic {
            display: inline-block;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 4px;
            margin-bottom: var(--spacing-xs);
        }

        .video-card-topic.lifestyle { background: rgba(59, 130, 246, 0.2); color: #60a5fa; }
        .video-card-topic.tech { background: rgba(16, 185, 129, 0.2); color: #34d399; }
        .video-card-topic.vlog { background: rgba(245, 158, 11, 0.2); color: #fbbf24; }
        .video-card-topic.tutorial { background: rgba(139, 92, 246, 0.2); color: #a78bfa; }
        .video-card-topic.review { background: rgba(239, 68, 68, 0.2); color: #f87171; }

        .video-card-date {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .video-card-actions {
            display: flex;
            gap: 4px;
            margin-top: var(--spacing-xs);
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .video-card:hover .video-card-actions {
            opacity: 1;
        }

        .video-card-btn {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-hover);
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 0.75rem;
        }

        .video-card-btn:hover {
            background: var(--accent-primary);
            color: white;
        }

        .video-card-btn.delete:hover {
            background: var(--danger);
        }

        .pipeline-add-btn {
            width: 100%;
            padding: var(--spacing-sm);
            background: transparent;
            border: 2px dashed var(--border-subtle);
            border-radius: 10px;
            color: var(--text-muted);
            font-family: inherit;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-top: var(--spacing-sm);
        }

        .pipeline-add-btn:hover {
            border-color: var(--accent-primary);
            color: var(--accent-primary);
            background: rgba(255, 107, 157, 0.05);
        }

        /* Status Colors for Pipeline */
        .video-card.status-idea { border-left: 3px solid #9ca3af; }
        .video-card.status-scripting { border-left: 3px solid #3b82f6; }
        .video-card.status-filming { border-left: 3px solid #f59e0b; }
        .video-card.status-editing { border-left: 3px solid #8b5cf6; }
        .video-card.status-published { border-left: 3px solid #10b981; }

        /* Calendar */
        .youtube-calendar-card {
            animation: fadeInUp 0.5s var(--transition-normal) forwards;
        }

        .calendar-nav {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .calendar-month {
            font-weight: 600;
            font-size: 1rem;
            min-width: 140px;
            text-align: center;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: var(--spacing-xs);
            margin-top: var(--spacing-md);
        }

        .calendar-day-header {
            text-align: center;
            font-size: 0.75rem;
            color: var(--text-muted);
            padding: var(--spacing-xs);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .calendar-day {
            aspect-ratio: 1;
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            padding: var(--spacing-xs);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            cursor: pointer;
            transition: all var(--transition-fast);
            min-height: 80px;
        }

        .calendar-day:hover {
            border-color: var(--border-active);
            background: var(--bg-hover);
        }

        .calendar-day.other-month {
            opacity: 0.4;
        }

        .calendar-day.today {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 1px var(--accent-primary);
        }

        .calendar-day-number {
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .calendar-day-events {
            display: flex;
            flex-direction: column;
            gap: 2px;
            width: 100%;
            overflow: hidden;
        }

        .calendar-event {
            font-size: 0.65rem;
            padding: 2px 4px;
            border-radius: 3px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .calendar-event.idea { background: rgba(156, 163, 175, 0.3); color: #d1d5db; }
        .calendar-event.scripting { background: rgba(59, 130, 246, 0.3); color: #93c5fd; }
        .calendar-event.filming { background: rgba(245, 158, 11, 0.3); color: #fcd34d; }
        .calendar-event.editing { background: rgba(139, 92, 246, 0.3); color: #c4b5fd; }
        .calendar-event.published { background: rgba(16, 185, 129, 0.3); color: #6ee7b7; }

        /* Video Modal */
        .video-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            transition: opacity var(--transition-normal);
        }

        .video-modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .video-modal {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: var(--spacing-xl);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform var(--transition-normal);
        }

        .video-modal-overlay.active .video-modal {
            transform: scale(1);
        }
        /* ============================================
           MEETINGS TAB STYLES
           ============================================ */

        /* Today's Meetings Section */
        .today-meetings {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(255, 143, 171, 0.05));
            border: 2px solid var(--accent-primary);
            border-radius: 16px;
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
            position: relative;
            animation: fadeInUp 0.5s var(--transition-normal) forwards;
        }

        .today-meetings::before {
            content: 'TODAY';
            position: absolute;
            top: -12px;
            left: var(--spacing-lg);
            background: var(--accent-primary);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.05em;
        }

        .today-meetings-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-md);
            padding-top: var(--spacing-xs);
        }

        .today-meetings-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--accent-primary);
        }

        .today-meetings-count {
            background: var(--accent-primary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .today-meeting-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            transition: all var(--transition-fast);
            animation: fadeInUp 0.5s var(--transition-normal) forwards;
        }

        .today-meeting-card:hover {
            border-color: var(--accent-primary);
            transform: translateX(4px);
            box-shadow: 0 4px 20px rgba(255, 107, 157, 0.15);
        }

        .today-meeting-card:last-child {
            margin-bottom: 0;
        }

        .meeting-time-block {
            text-align: center;
            min-width: 70px;
        }

        .meeting-time {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .meeting-countdown {
            font-size: 0.75rem;
            color: var(--accent-primary);
            font-weight: 600;
            margin-top: 2px;
        }

        .meeting-info {
            flex: 1;
        }

        .meeting-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .meeting-attendees {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .meeting-type-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .meeting-type-badge.call {
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
        }

        .meeting-type-badge.zoom {
            background: rgba(139, 92, 246, 0.2);
            color: #a78bfa;
        }

        .meeting-type-badge.in-person {
            background: rgba(16, 185, 129, 0.2);
            color: #34d399;
        }

        /* Upcoming Meetings */
        .meetings-section {
            margin-bottom: var(--spacing-xl);
        }

        .meetings-section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-md);
        }

        .meetings-section-title {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .meeting-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
            animation: fadeInUp 0.5s var(--transition-normal) forwards;
        }

        .meeting-card:hover {
            border-color: var(--border-active);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }

        .meeting-card.expanded {
            border-color: var(--accent-primary);
            box-shadow: 0 0 30px rgba(255, 107, 157, 0.1);
        }

        .meeting-card-header {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-md);
        }

        .meeting-card-main {
            flex: 1;
        }

        .meeting-card-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .meeting-card-meta {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .meeting-card-meta span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .meeting-card-preview {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: var(--spacing-sm);
            padding-top: var(--spacing-sm);
            border-top: 1px solid var(--border-subtle);
        }

        .meeting-expand-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .meeting-expand-btn:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .meeting-expand-btn.expanded {
            transform: rotate(180deg);
        }

        /* Expanded Meeting Details */
        .meeting-details {
            display: none;
            margin-top: var(--spacing-md);
            padding-top: var(--spacing-md);
            border-top: 1px solid var(--border-subtle);
            animation: fadeInUp 0.3s var(--transition-fast);
        }

        .meeting-details.expanded {
            display: block;
        }

        .meeting-details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-lg);
        }

        @media (max-width: 768px) {
            .meeting-details-grid {
                grid-template-columns: 1fr;
            }
        }

        .meeting-detail-section {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: var(--spacing-md);
        }

        .meeting-detail-section h4 {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--spacing-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        /* Agenda Items */
        .agenda-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .agenda-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-xs);
            border-radius: 6px;
            transition: all var(--transition-fast);
        }

        .agenda-item:hover {
            background: var(--bg-hover);
        }

        .agenda-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid var(--border-subtle);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all var(--transition-fast);
        }

        .agenda-checkbox:hover {
            border-color: var(--accent-primary);
        }

        .agenda-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
        }

        .agenda-checkbox.checked::after {
            content: '✓';
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .agenda-text {
            flex: 1;
            font-size: 0.9rem;
        }

        .agenda-text.completed {
            text-decoration: line-through;
            color: var(--text-muted);
        }

        .agenda-delete {
            color: var(--text-muted);
            cursor: pointer;
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .agenda-item:hover .agenda-delete {
            opacity: 1;
        }

        .agenda-delete:hover {
            color: var(--danger);
        }

        .add-agenda-btn {
            width: 100%;
            padding: var(--spacing-sm);
            background: transparent;
            border: 2px dashed var(--border-subtle);
            border-radius: 8px;
            color: var(--text-muted);
            font-family: inherit;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-top: var(--spacing-xs);
        }

        .add-agenda-btn:hover {
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }

        /* Notes Textarea */
        .meeting-notes {
            width: 100%;
            min-height: 120px;
            padding: var(--spacing-sm);
            background: var(--bg-primary);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9rem;
            resize: vertical;
            transition: all var(--transition-fast);
        }

        .meeting-notes:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }

        /* Action Items */
        .action-items-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .action-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-xs) var(--spacing-sm);
            background: var(--bg-primary);
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .action-item-input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9rem;
        }

        .action-item-input:focus {
            outline: none;
        }

        .action-item-delete {
            color: var(--text-muted);
            cursor: pointer;
            transition: color var(--transition-fast);
        }

        .action-item-delete:hover {
            color: var(--danger);
        }

        .add-action-btn {
            width: 100%;
            padding: var(--spacing-sm);
            background: transparent;
            border: 2px dashed var(--border-subtle);
            border-radius: 8px;
            color: var(--text-muted);
            font-family: inherit;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-top: var(--spacing-xs);
        }

        .add-action-btn:hover {
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }

        /* Meeting Actions */
        .meeting-actions {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
            padding-top: var(--spacing-md);
            border-top: 1px solid var(--border-subtle);
        }

        /* Past Meetings Archive */
        .past-meetings {
            margin-top: var(--spacing-xl);
        }

        .past-meetings-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-md);
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .past-meetings-header:hover {
            background: var(--bg-hover);
            border-color: var(--border-active);
        }

        .past-meetings-title {
            font-size: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .past-meetings-toggle {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform var(--transition-fast);
        }

        .past-meetings-toggle.expanded {
            transform: rotate(180deg);
        }

        .past-meetings-content {
            display: none;
            margin-top: var(--spacing-md);
        }

        .past-meetings-content.expanded {
            display: block;
            animation: fadeInUp 0.3s var(--transition-fast);
        }

        .past-meeting-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
            opacity: 0.8;
            transition: all var(--transition-fast);
        }

        .past-meeting-card:hover {
            opacity: 1;
            border-color: var(--border-active);
        }

        .past-meeting-card .meeting-type-badge {
            opacity: 0.7;
        }

        /* Meeting Modal */
        .meeting-modal-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-md);
        }

        @media (max-width: 480px) {
            .meeting-modal-grid {
                grid-template-columns: 1fr;
            }
        }

        .meeting-modal-grid .form-group {
            margin-bottom: var(--spacing-sm);
        }

        .meeting-modal-grid .form-group.full-width {
            grid-column: 1 / -1;
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="header-inner">
            <div class="logo">
                <div class="logo-icon">🚀</div>
                <span>Mission Control</span>
            </div>
            <nav class="nav-tabs">
                <button class="nav-tab active" data-tab="dashboard">📊 Dashboard</button>
                <button class="nav-tab" data-tab="projects">📋 Projects</button>
                <button class="nav-tab" data-tab="revenue">💰 Revenue</button>
                <button class="nav-tab" data-tab="command-center">🏢 Command Center</button>
                <button class="nav-tab" data-tab="youtube">🎬 YouTube</button>
                <button class="nav-tab" data-tab="meetings">📞 Meetings</button>
                <button class="nav-tab" data-tab="timeline">
                <button class="nav-tab" data-tab="timeline">📅 Timeline</button>
                <button class="nav-tab" data-tab="intel">📡 Intel</button>
                <button class="nav-tab" data-tab="notes">📝 Notes</button>
            </nav>
            <div class="header-right">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="Search..." id="searchInput">
                </div>
                <div class="weather-display" id="weatherDisplay" style="display: none;">
                    <span class="weather-icon" id="weatherIcon">🌡️</span>
                    <span class="weather-temp" id="weatherTemp">--°</span>
                    <span class="weather-condition" id="weatherCondition">--</span>
                </div>
                <div class="server-status offline" id="serverStatus" title="Server connection status">
                    <div class="server-status-dot"></div>
                    <span id="serverStatusText">Server: Offline</span>
                </div>
                <div class="status-indicator" id="statusIndicator" title="Data sync status">
                    <div class="status-dot offline" id="syncStatusDot"></div>
                    <span id="syncStatusText">Local</span>
                </div>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <!-- DASHBOARD TAB -->
        <div class="tab-content active" id="dashboard">
            <div class="welcome-bar">
                <div class="welcome-content">
                    <div>
                        <h1 class="welcome-title">Good <span id="greeting">morning</span>, Jade</h1>
                        <p class="welcome-subtitle">Here's your mission status for today.</p>
                    </div>
                    <div class="live-datetime">
                        <div class="live-time" id="liveTime">00:00</div>
                        <div class="live-date" id="liveDate">Loading...</div>
                    </div>
                </div>
            </div>

            <div class="metrics-grid">
                <div class="metric-card income stagger-1">
                    <div class="metric-icon">💰</div>
                    <div class="metric-label">Monthly Income</div>
                    <div class="metric-value" id="incomeValue">$0</div>
                    <div class="metric-trend up">Target: 04/13/2026</div>
                </div>

                <div class="metric-card projects stagger-2">
                    <div class="metric-icon">📁</div>
                    <div class="metric-label">Active Projects</div>
                    <div class="metric-value" id="activeProjects">0</div>
                    <div class="metric-trend">In progress</div>
                </div>

                <div class="metric-card tasks stagger-3">
                    <div class="metric-icon">✓</div>
                    <div class="metric-label">Tasks Today</div>
                    <div class="metric-value" id="tasksToday">0</div>
                    <div class="metric-trend">To complete</div>
                </div>

                <div class="metric-card goal stagger-4">
                    <div class="metric-icon">🎯</div>
                    <div class="metric-label">Days to Goal</div>
                    <div class="metric-value" id="daysToGoal">0</div>
                    <div class="metric-trend">Until 04/13/2026</div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="card stagger-1">
                    <div class="card-header">
                        <h3 class="card-title">🕐 Recent Activity</h3>
                        <button class="btn btn-secondary btn-sm" onclick="clearActivity()">Clear</button>
                    </div>
                    <div class="activity-list" id="activityFeed">
                        <div class="empty-state">No recent activity</div>
                    </div>
                </div>

                <div class="card stagger-2">
                    <div class="card-header">
                        <h3 class="card-title">⭐ Top Priorities</h3>
                        <button class="btn btn-primary btn-sm" onclick="addPriority()">+ Add</button>
                    </div>
                    <div class="priority-list" id="priorityList">
                        <div class="empty-state">No priorities set</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PROJECTS TAB - KANBAN BOARD -->
        <div class="tab-content" id="projects">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                <h2 style="font-size: 1.5rem; font-weight: 700;">📋 Projects</h2>
                <button class="btn btn-primary" onclick="openTaskModal()">+ New Task</button>
            </div>
            
            <div class="kanban-board">
                <!-- Backlog Column -->
                <div class="kanban-column">
                    <div class="kanban-column-header">
                        <div class="kanban-column-title">
                            📥 Backlog
                            <span class="kanban-count" id="countBacklog">0</span>
                        </div>
                    </div>
                    <div class="kanban-tasks" id="backlogTasks"></div>
                    <button class="kanban-add-btn" onclick="openTaskModal('backlog')">+ Add task</button>
                </div>

                <!-- In Progress Column -->
                <div class="kanban-column">
                    <div class="kanban-column-header">
                        <div class="kanban-column-title">
                            ⚡ In Progress
                            <span class="kanban-count" id="countInProgress">0</span>
                        </div>
                    </div>
                    <div class="kanban-tasks" id="inProgressTasks"></div>
                    <button class="kanban-add-btn" onclick="openTaskModal('inprogress')">+ Add task</button>
                </div>

                <!-- Done Column -->
                <div class="kanban-column">
                    <div class="kanban-column-header">
                        <div class="kanban-column-title">
                            ✅ Done
                            <span class="kanban-count" id="countDone">0</span>
                        </div>
                    </div>
                    <div class="kanban-tasks" id="doneTasks"></div>
                    <button class="kanban-add-btn" onclick="openTaskModal('done')">+ Add task</button>
                </div>
            </div>
        </div>

        <!-- REVENUE TAB -->
        <div class="tab-content" id="revenue">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                <h2 style="font-size: 1.5rem; font-weight: 700;">💰 Revenue</h2>
                <button class="btn btn-primary" onclick="openClientModal()">+ Add Client</button>
            </div>
            
            <div class="revenue-grid">
                <!-- Revenue Goal Card -->
                <div class="card stagger-1" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <h3 class="card-title">🎯 Monthly Revenue Goal</h3>
                        <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                            <span style="color: var(--text-secondary);">Goal:</span>
                            <input type="number" id="revenueGoalInput" class="form-input" style="width: 120px;" placeholder="10000" value="10000" onchange="updateRevenueGoal(this.value)">
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: var(--spacing-xl); flex-wrap: wrap;">
                        <div class="revenue-gauge">
                            <svg viewBox="0 0 100 100" class="gauge-svg">
                                <circle class="gauge-bg" cx="50" cy="50" r="45"/>
                                <circle class="gauge-fill" id="revenueGaugeFill" cx="50" cy="50" r="45" stroke-dasharray="283" stroke-dashoffset="283"/>
                            </svg>
                            <div class="gauge-value">
                                <span id="revenuePercentage">0%</span>
                            </div>
                        </div>
                        <div style="flex: 1; min-width: 200px;">
                            <div class="revenue-progress-text">
                                Current MRR: <strong id="currentMRR">$0</strong> / <span id="goalMRR">$10,000</span> goal
                            </div>
                            <div style="margin-top: var(--spacing-md); display: flex; gap: var(--spacing-lg); flex-wrap: wrap;">
                                <div class="revenue-stat">
                                    <div class="revenue-stat-label">Projected Annual</div>
                                    <div class="revenue-stat-value" id="projectedAnnual">$0</div>
                                </div>
                                <div class="revenue-stat">
                                    <div class="revenue-stat-label">Monthly Growth Needed</div>
                                    <div class="revenue-stat-value" id="growthNeeded">$0</div>
                                </div>
                                <div class="revenue-stat">
                                    <div class="revenue-stat-label">Active Clients</div>
                                    <div class="revenue-stat-value" id="activeClientCount">0</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Revenue Chart Card -->
                <div class="card stagger-2">
                    <div class="card-header">
                        <h3 class="card-title">📈 Revenue History (Last 6 Months)</h3>
                    </div>
                    <div class="revenue-chart" id="revenueChart">
                        <!-- Chart bars will be rendered here -->
                    </div>
                    <div class="revenue-chart-legend">
                        <div class="legend-item">
                            <span class="legend-color" style="background: var(--accent-primary);"></span>
                            <span>Monthly Revenue</span>
                        </div>
                    </div>
                </div>

                <!-- Client List Card -->
                <div class="card stagger-3">
                    <div class="card-header">
                        <h3 class="card-title">👥 Clients</h3>
                        <span id="totalMRR" style="color: var(--accent-primary); font-weight: 600;">Total MRR: $0</span>
                    </div>
                    <div class="client-list" id="clientList">
                        <div class="empty-state">No clients yet. Add your first client!</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- COMMAND CENTER TAB -->
        <div class="tab-content" id="command-center">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                <h2 style="font-size: 1.5rem; font-weight: 700;">🏢 Command Center</h2>
                <span style="font-size: 0.875rem; color: var(--text-muted);">AI Agent Team Management</span>
            </div>
            
            <!-- Agents Grid -->
            <div class="agents-grid" id="agentsGrid">
                <!-- Agents rendered here -->
            </div>
            
            <!-- Executive Decisions Section -->
            <div class="decisions-section">
                <div class="decisions-header">
                    <h3 class="card-title">📋 Executive Decisions</h3>
                    <button class="btn btn-primary btn-sm" onclick="openDecisionModal()">+ Add Decision</button>
                </div>
                <div class="decisions-list" id="decisionsList">
                    <!-- Decisions rendered here -->
                </div>
            </div>
        </div>

        <!-- Agent Detail Slide-out Panel -->
        <div class="slide-out-overlay" id="agentPanelOverlay" onclick="closeAgentPanel()"></div>
        <div class="slide-out-panel" id="agentPanel">
            <div class="slide-out-header">
                <div>
                    <h3 id="panelAgentName">Agent Name</h3>
                    <span id="panelAgentStatus" class="agent-status-badge">Online</span>
                </div>
                <div class="modal-close" onclick="closeAgentPanel()">✕</div>
            </div>
            <div class="slide-out-content">
                <div class="panel-section">
                    <h4>Role</h4>
                    <p id="panelAgentRole">Role description</p>
                </div>
                <div class="panel-section">
                    <h4>Description</h4>
                    <p id="panelAgentDescription">Full description</p>
                </div>
                <div class="panel-section">
                    <h4>Capabilities</h4>
                    <ul id="panelAgentCapabilities" class="capabilities-list"></ul>
                </div>
                <div class="panel-section">
                    <h4>Recent Activity</h4>
                    <div id="panelAgentActivity" class="agent-activity-log"></div>
                </div>
                <div class="panel-section">
                    <h4>Performance Notes</h4>
                    <textarea id="panelAgentNotes" class="form-textarea" placeholder="Add notes about this agent's performance..." onblur="saveAgentNotes()"></textarea>
                </div>
                <div class="panel-footer">
                    <button class="btn btn-primary" onclick="openSendTaskModal()">📨 Send Task</button>
                </div>
            </div>
        </div>

        <!-- Send Task Modal -->
        <div class="modal-overlay" id="sendTaskModal">
            <div class="modal">
                <div class="modal-header">
                    <h3 class="modal-title">Send Task to Agent</h3>
                    <div class="modal-close" onclick="closeSendTaskModal()">✕</div>
                </div>
                <form onsubmit="sendTask(event)">
                    <div class="form-group">
                        <label class="form-label">Task Description</label>
                        <textarea class="form-textarea" id="taskDescription" placeholder="Describe the task..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <select class="form-select" id="taskPriorityLevel">
                            <option value="high">🔴 High</option>
                            <option value="medium" selected>🟡 Medium</option>
                            <option value="low">🟢 Low</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeSendTaskModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Send Task</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Add Decision Modal -->
        <div class="modal-overlay" id="decisionModal">
            <div class="modal">
                <div class="modal-header">
                    <h3 class="modal-title">Add Executive Decision</h3>
                    <div class="modal-close" onclick="closeDecisionModal()">✕</div>
                </div>
                <form onsubmit="addDecision(event)">
                    <div class="form-group">
                        <label class="form-label">Date</label>
                        <input type="date" class="form-input" id="decisionDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Question Asked</label>
                        <input type="text" class="form-input" id="decisionQuestion" placeholder="What was the decision about?" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Decision Made</label>
                        <textarea class="form-textarea" id="decisionMade" placeholder="What was decided?" required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Agents Consulted (comma-separated)</label>
                        <input type="text" class="form-input" id="decisionAgents" placeholder="e.g., Clara, Research Bot">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeDecisionModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Decision</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- YOUTUBE TAB -->
        <div class="tab-content" id="youtube">
            <div class="welcome-bar">
                <div class="welcome-content">
                    <div>
                        <h1 class="welcome-title">🎬 YouTube Studio</h1>
                        <p class="welcome-subtitle">Plan, track, and grow your channel.</p>
                    </div>
                    <div class="live-datetime">
                        <div class="metric-value" id="currentMilestoneDisplay">🌱 Seedling</div>
                        <div class="live-date">Current Status</div>
                    </div>
                </div>
            </div>

            <!-- Growth Tracker -->
            <div class="card youtube-growth-card">
                <div class="card-header">
                    <h2 class="card-title">📈 Growth Tracker</h2>
                    <button class="btn btn-primary btn-sm" onclick="openVideoModal()">+ New Video Idea</button>
                </div>
                <div class="growth-tracker-content">
                    <div class="subscriber-section">
                        <div class="subscriber-input-group">
                            <label>Subscribers</label>
                            <input type="number" id="subscriberCountInput" class="subscriber-input" value="850" onchange="updateSubscriberCount()">
                        </div>
                        <div class="milestone-display">
                            <div class="current-milestone" id="currentMilestone">🌱 Seedling</div>
                            <div class="next-milestone" id="nextMilestone">Next: 🌿 Sprout (500)</div>
                        </div>
                    </div>
                    <div class="progress-section">
                        <div class="xp-progress-bar">
                            <div class="xp-progress-fill" id="xpProgressFill" style="width: 0%"></div>
                        </div>
                        <div class="progress-stats">
                            <span id="progressPercent">0% to next milestone</span>
                            <span id="subscribersNeeded">150 more needed</span>
                        </div>
                    </div>
                    <div class="youtube-stats-grid">
                        <div class="youtube-stat">
                            <div class="youtube-stat-value" id="totalViews">15K</div>
                            <div class="youtube-stat-label">Total Views</div>
                        </div>
                        <div class="youtube-stat">
                            <div class="youtube-stat-value" id="videosPublished">12</div>
                            <div class="youtube-stat-label">Videos</div>
                        </div>
                        <div class="youtube-stat">
                            <div class="youtube-stat-value" id="avgViews">1.2K</div>
                            <div class="youtube-stat-label">Avg Views</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Video Pipeline -->
            <div class="youtube-pipeline">
                <div class="pipeline-column" data-status="idea">
                    <div class="pipeline-header">
                        <span class="pipeline-title">💡 Idea</span>
                        <span class="pipeline-count" id="count-idea">0</span>
                    </div>
                    <div class="pipeline-tasks" id="pipeline-idea"></div>
                    <button class="pipeline-add-btn" onclick="openVideoModal('idea')">+ Add</button>
                </div>
                <div class="pipeline-column" data-status="scripting">
                    <div class="pipeline-header">
                        <span class="pipeline-title">📝 Scripting</span>
                        <span class="pipeline-count" id="count-scripting">0</span>
                    </div>
                    <div class="pipeline-tasks" id="pipeline-scripting"></div>
                    <button class="pipeline-add-btn" onclick="openVideoModal('scripting')">+ Add</button>
                </div>
                <div class="pipeline-column" data-status="filming">
                    <div class="pipeline-header">
                        <span class="pipeline-title">🎥 Filming</span>
                        <span class="pipeline-count" id="count-filming">0</span>
                    </div>
                    <div class="pipeline-tasks" id="pipeline-filming"></div>
                    <button class="pipeline-add-btn" onclick="openVideoModal('filming')">+ Add</button>
                </div>
                <div class="pipeline-column" data-status="editing">
                    <div class="pipeline-header">
                        <span class="pipeline-title">✂️ Editing</span>
                        <span class="pipeline-count" id="count-editing">0</span>
                    </div>
                    <div class="pipeline-tasks" id="pipeline-editing"></div>
                    <button class="pipeline-add-btn" onclick="openVideoModal('editing')">+ Add</button>
                </div>
                <div class="pipeline-column" data-status="published">
                    <div class="pipeline-header">
                        <span class="pipeline-title">🚀 Published</span>
                        <span class="pipeline-count" id="count-published">0</span>
                    </div>
                    <div class="pipeline-tasks" id="pipeline-published"></div>
                </div>
            </div>

            <!-- Content Calendar -->
            <div class="card youtube-calendar-card">
                <div class="card-header">
                    <h2 class="card-title">📅 Content Calendar</h2>
                    <div class="calendar-nav">
                        <button class="btn btn-sm btn-secondary" onclick="changeMonth(-1)">← Prev</button>
                        <span class="calendar-month" id="calendarMonth">February 2026</span>
                        <button class="btn btn-sm btn-secondary" onclick="changeMonth(1)">Next →</button>
                    </div>
                </div>
                <div class="calendar-grid" id="calendarGrid"></div>
            </div>
        </div>

        <!-- MEETINGS TAB -->
        <div class="tab-content" id="meetings">
            <!-- Today's Meetings -->
            <div class="today-meetings" id="todayMeetingsSection">
                <div class="today-meetings-header">
                    <div class="today-meetings-title">📅 Today's Meetings</div>
                    <div class="today-meetings-count" id="todayMeetingsCount">0</div>
                </div>
                <div id="todayMeetingsList">
                    <!-- Today's meetings rendered here -->
                </div>
            </div>

            <!-- Upcoming Meetings -->
            <div class="meetings-section">
                <div class="meetings-section-header">
                    <div class="meetings-section-title">
                        <span>📆</span> Upcoming Meetings
                    </div>
                    <button class="btn btn-primary btn-sm" onclick="openMeetingModal()">
                        <span>+</span> Add Meeting
                    </button>
                </div>
                <div id="upcomingMeetingsList">
                    <!-- Upcoming meetings rendered here -->
                </div>
            </div>

            <!-- Past Meetings Archive -->
            <div class="past-meetings">
                <div class="past-meetings-header" onclick="togglePastMeetings()">
                    <div class="past-meetings-title">
                        <span>📁</span> Past Meetings Archive
                    </div>
                    <div class="past-meetings-toggle" id="pastMeetingsToggle">
                        <span>▼</span>
                    </div>
                </div>
                <div class="past-meetings-content" id="pastMeetingsContent">
                    <div id="pastMeetingsList">
                        <!-- Past meetings rendered here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- TIMELINE TAB -->
        <div class="tab-content" id="timeline">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                <h2 style="font-size: 1.5rem; font-weight: 700;">📅 Timeline</h2>
                <span style="font-size: 0.875rem; color: var(--text-muted);">Your roadmap to 04/13/2026</span>
            </div>
            <div class="timeline-container" id="timelineContainer">
                <!-- Timeline phases will be rendered here -->
            </div>
        </div>

        <!-- TAB: Intel -->
        <div id="intel" class="tab-content">
            <div class="intel-container">
                <!-- Google Alerts Section -->
                <div class="google-alerts-section" id="googleAlertsSection" style="display: none;">
                    <div class="google-alerts-header">
                        <div class="google-alerts-title">📰 Today's Google Alerts</div>
                        <div class="google-alerts-date" id="googleAlertsDate"></div>
                    </div>
                    <div class="google-alerts-items" id="googleAlertsItems"></div>
                </div>

                <!-- Daily Brief Section -->
                <div class="daily-brief">
                    <div class="daily-brief-header">
                        <div class="daily-brief-title">📋 Daily Brief</div>
                        <div class="daily-brief-date" id="dailyBriefDate"></div>
                    </div>
                    <div class="brief-items" id="dailyBriefItems">
                        <!-- Daily brief items will be rendered here -->
                    </div>
                </div>

                <!-- Filter Controls -->
                <div class="intel-filters">
                    <div class="intel-category-tabs">
                        <button class="intel-category-tab active" data-category="all">All</button>
                        <button class="intel-category-tab" data-category="google-alerts">📰 Google Alerts</button>
                        <button class="intel-category-tab" data-category="ai-news">🤖 AI News</button>
                        <button class="intel-category-tab" data-category="industry-trends">📊 Industry Trends</button>
                        <button class="intel-category-tab" data-category="competitor-watch">👁️ Competitor Watch</button>
                        <button class="intel-category-tab" data-category="opportunities">💎 Opportunities</button>
                    </div>
                    <div class="intel-importance-filters">
                        <button class="importance-btn active" data-importance="all">All</button>
                        <button class="importance-btn" data-importance="hot">🔥 Hot</button>
                        <button class="importance-btn" data-importance="notable">⚡ Notable</button>
                        <button class="importance-btn" data-importance="reference">📌 Reference</button>
                    </div>
                    <button class="clear-filters-btn" onclick="clearFilters()">Clear Filters</button>
                </div>

                <!-- Intel Items Grid -->
                <div class="intel-grid" id="intelGrid">
                    <!-- Intel items will be rendered here -->
                </div>
            </div>

            <!-- Add Intel Button -->
            <button class="add-intel-btn" onclick="openIntelModal()" title="Add Intel">+</button>

            <!-- Intel Modal -->
            <div class="modal-overlay" id="intelModal">
                <div class="modal">
                    <div class="modal-header">
                        <h3 class="modal-title">Add Intel Item</h3>
                        <button class="modal-close" onclick="closeIntelModal()">✕</button>
                    </div>
                    <form id="intelForm" onsubmit="saveIntelItem(event)">
                        <div class="form-group">
                            <label class="form-label">Title</label>
                            <input type="text" class="form-input" id="intelTitle" required placeholder="Enter title...">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Summary</label>
                            <textarea class="form-textarea" id="intelSummary" rows="3" placeholder="Enter summary..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Source URL</label>
                            <input type="url" class="form-input" id="intelSourceUrl" placeholder="https://example.com">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Category</label>
                            <select class="form-select" id="intelCategory" required>
                                <option value="google-alerts">📰 Google Alerts</option>
                                <option value="ai-news">🤖 AI News</option>
                                <option value="industry-trends">📊 Industry Trends</option>
                                <option value="competitor-watch">👁️ Competitor Watch</option>
                                <option value="opportunities">💎 Opportunities</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Importance</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="intelImportance" value="hot" required>
                                    🔥 Hot
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="intelImportance" value="notable" checked>
                                    ⚡ Notable
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="intelImportance" value="reference">
                                    📌 Reference
                                </label>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeIntelModal()">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save Intel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
            <!-- NOTES TAB (Simplified) -->
        <div class="tab-content" id="notes">
            <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem;">📝 Notes</h2>
            <div class="card" style="min-height: 400px;">
                <textarea 
                    id="notesArea" 
                    style="width: 100%; min-height: 350px; background: transparent; border: none; color: var(--text-primary); font-family: inherit; font-size: 1rem; resize: none; outline: none;"
                    placeholder="Start typing your notes here..."></textarea>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-subtle);">
                    <span style="font-size: 0.875rem; color: var(--text-muted);" id="notesStatus">Not saved</span>
                    <span style="font-size: 0.875rem; color: var(--text-muted);" id="charCount">0 chars</span>
                </div>
            </div>
        </div>
    </main>

    <!-- Client Modal -->
    <div class="modal-overlay" id="clientModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="clientModalTitle">Add Client</h3>
                <div class="modal-close" onclick="closeClientModal()">✕</div>
            </div>
            
            <form id="clientForm" onsubmit="saveClient(event)">
                <input type="hidden" id="clientId">
                
                <div class="form-group">
                    <label class="form-label">Client Name</label>
                    <input type="text" class="form-input" id="clientName" placeholder="Enter client name" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Monthly Value ($)</label>
                    <input type="number" class="form-input" id="clientValue" placeholder="Enter monthly value" min="0" step="0.01" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" id="clientStatus">
                        <option value="active">🟢 Active</option>
                        <option value="pending">🟡 Pending</option>
                        <option value="churned">🔴 Churned</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Start Date</label>
                    <input type="date" class="form-input" id="clientStartDate" required>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeClientModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Client</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Task Modal -->
    <div class="modal-overlay" id="taskModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">New Task</h3>
                <div class="modal-close" onclick="closeTaskModal()">✕</div>
            </div>
            
            <form id="taskForm" onsubmit="saveTask(event)">
                <input type="hidden" id="taskId">
                <input type="hidden" id="taskStatus" value="backlog">
                
                <div class="form-group">
                    <label class="form-label">Title</label>
                    <input type="text" class="form-input" id="taskTitle" placeholder="Enter task title" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" id="taskDesc" placeholder="Enter task description"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Priority</label>
                    <select class="form-select" id="taskPriority">
                        <option value="low">🟢 Low</option>
                        <option value="medium" selected>🟡 Medium</option>
                        <option value="high">🔴 High</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" id="taskStatusSelect">
                        <option value="backlog">📥 Backlog</option>
                        <option value="inprogress">⚡ In Progress</option>
                        <option value="done">✅ Done</option>
                    </select>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeTaskModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Task</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Video Modal -->
    <div class="modal-overlay" id="videoModal">
        <div class="modal video-modal">
            <div class="modal-header">
                <h3 class="modal-title" id="videoModalTitle">New Video Idea</h3>
                <div class="modal-close" onclick="closeVideoModal()">×</div>
            </div>
            <form onsubmit="saveVideo(event)">
                <div class="form-group">
                    <label class="form-label">Video Title</label>
                    <input type="text" class="form-input" id="videoTitle" required placeholder="Enter video title...">
                </div>
                <div class="form-group">
                    <label class="form-label">Topic/Category</label>
                    <select class="form-select" id="videoTopic">
                        <option value="lifestyle">Lifestyle</option>
                        <option value="tech">Tech</option>
                        <option value="vlog">Vlog</option>
                        <option value="tutorial">Tutorial</option>
                        <option value="review">Review</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-select" id="videoStatus">
                        <option value="idea">💡 Idea</option>
                        <option value="scripting">📝 Scripting</option>
                        <option value="filming">🎥 Filming</option>
                        <option value="editing">✂️ Editing</option>
                        <option value="published">🚀 Published</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Target Publish Date</label>
                    <input type="date" class="form-input" id="videoDate" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Notes</label>
                    <textarea class="form-textarea" id="videoNotes" rows="3" placeholder="Any additional notes..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeVideoModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Video</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function formatDate(date) {
            return new Date(date).toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        function formatTime(date) {
            return new Date(date).toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false 
            });
        }

        function timeAgo(date) {
            const seconds = Math.floor((new Date() - new Date(date)) / 1000);
            if (seconds < 60) return 'just now';
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return `${minutes}m ago`;
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `${hours}h ago`;
            const days = Math.floor(hours / 24);
            return `${days}d ago`;
        }

        function getGreeting() {
            const hour = new Date().getHours();
            if (hour < 12) return 'morning';
            if (hour < 17) return 'afternoon';
            return 'evening';
        }

        function daysUntil(targetDate) {
            const target = new Date(targetDate);
            const now = new Date();
            const diffTime = target - now;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays > 0 ? diffDays : 0;
        }

        // ============================================
        // LOCAL STORAGE
        // ============================================
        
        const Storage = {
            get(key, defaultValue = null) {
                try {
                    const item = localStorage.getItem(`missionControl_${key}`);
                    return item ? JSON.parse(item) : defaultValue;
                } catch (e) {
                    return defaultValue;
                }
            },
            set(key, value) {
                try {
                    localStorage.setItem(`missionControl_${key}`, JSON.stringify(value));
                } catch (e) {
                    console.error('Storage error:', e);
                }
            }
        };

        // ============================================
        // APP STATE
        // ============================================
        
        const AppState = {
            priorities: Storage.get('priorities', []),
            activities: Storage.get('activities', []),
            notes: Storage.get('notes', ''),
            income: Storage.get('income', 0),
            tasks: Storage.get('tasks', []),
            milestones: Storage.get('milestones', {}),
            clients: Storage.get('clients', []),
            revenueGoal: Storage.get('revenueGoal', 10000),
            revenueHistory: Storage.get('revenueHistory', [
                { month: 'Sep', value: 6500 },
                { month: 'Oct', value: 7200 },
                { month: 'Nov', value: 8100 },
                { month: 'Dec', value: 7800 },
                { month: 'Jan', value: 8900 },
                { month: 'Feb', value: 9500 }
            ]),
            agents: Storage.get('agents', [
                { id: 'agent-1', name: 'Clara', role: 'Executive Assistant', status: 'online', model: 'kimi-k2.5', description: 'Primary executive assistant for Jade Gaul.', capabilities: ['Calendar management', 'Email drafting', 'Research', 'Task coordination'], activityLog: [], performanceNotes: '', lastActive: new Date().toISOString() },
                { id: 'agent-2', name: 'Research Bot', role: 'Information Gatherer', status: 'online', model: 'gpt-4o', description: 'Specialized in research and information synthesis.', capabilities: ['Web search', 'Data analysis', 'Report generation', 'Trend monitoring'], activityLog: [], performanceNotes: '', lastActive: new Date().toISOString() },
                { id: 'agent-3', name: 'Code Assistant', role: 'Developer', status: 'busy', model: 'claude-3-opus', description: 'Programming and technical implementation expert.', capabilities: ['Code writing', 'Debugging', 'Architecture design', 'Technical review'], activityLog: [], performanceNotes: '', lastActive: new Date().toISOString() },
                { id: 'agent-4', name: 'Creative AI', role: 'Content Creator', status: 'online', model: 'kimi-k2.5', description: 'Creative writing and content generation specialist.', capabilities: ['Copywriting', 'Content ideation', 'Creative direction', 'Brand voice'], activityLog: [], performanceNotes: '', lastActive: new Date().toISOString() }
            ]),
            decisions: Storage.get('decisions', []),
            videoIdeas: Storage.get('videoIdeas', [
                { id: 'vid-1', title: 'My AI Setup Tour 2026', topic: 'Tech', status: 'editing', targetDate: '2026-02-25', notes: 'Show all the AI tools I use daily' },
                { id: 'vid-2', title: 'How I Built Mission Control', topic: 'Tutorial', status: 'scripting', targetDate: '2026-03-10', notes: 'Walk through building the dashboard' },
                { id: 'vid-3', title: 'Day in the Life of a Tech Entrepreneur', topic: 'Lifestyle', status: 'idea', targetDate: '2026-03-20', notes: 'Follow me through a typical day' }
            ]),
            youtubeStats: Storage.get('youtubeStats', { subscriberCount: 850, totalViews: 15000, videosPublished: 12 }),
            meetings: Storage.get('meetings', [
                { id: 'mtg-1', title: 'Client Kickoff: TechCorp', date: new Date().toISOString().split('T')[0], time: '14:00', attendees: ['Sarah Johnson', 'Mike Chen'], type: 'zoom', prepNotes: 'Review proposal slides beforehand', agenda: [{ id: 'ag-1', text: 'Introductions & background', completed: false }, { id: 'ag-2', text: 'Project scope discussion', completed: false }, { id: 'ag-3', text: 'Timeline & deliverables', completed: false }], notes: '', actionItems: [] },
                { id: 'mtg-2', title: 'Weekly Team Sync', date: new Date(Date.now() + 86400000).toISOString().split('T')[0], time: '10:00', attendees: ['Internal Team'], type: 'call', prepNotes: 'Prepare progress updates', agenda: [{ id: 'ag-1', text: 'Progress review', completed: false }, { id: 'ag-2', text: 'Blockers & solutions', completed: false }], notes: '', actionItems: [] },
                { id: 'mtg-3', title: 'Board Meeting', date: new Date(Date.now() - 172800000).toISOString().split('T')[0], time: '09:00', attendees: ['Board Members'], type: 'in-person', prepNotes: 'Q4 financial review', agenda: [{ id: 'ag-1', text: 'Financial review', completed: true }, { id: 'ag-2', text: 'Strategic planning', completed: true }], notes: 'Meeting went well. Board approved Q1 budget.', actionItems: ['Prepare detailed budget breakdown', 'Schedule follow-up in 2 weeks'] }
            ]),
            intelItems: Storage.get('intelItems', [
                { id: 'intel-1', title: 'OpenAI GPT-5 Announcement', summary: 'OpenAI announced GPT-5 with improved reasoning capabilities, lower latency, and better code generation. Expected release Q2 2026.', sourceUrl: 'https://openai.com/blog', category: 'ai-news', importance: 'hot', dateAdded: '2026-02-20' },
                { id: 'intel-2', title: 'YouTube Algorithm Changes', summary: 'YouTube is reportedly changing how it recommends long-form content vs Shorts. Creators should diversify content strategy.', sourceUrl: 'https://youtube.com/creators', category: 'industry-trends', importance: 'notable', dateAdded: '2026-02-19' },
                { id: 'intel-3', title: 'Competitor Launches AI Course', summary: 'Main competitor launched an AI automation course targeting similar audience. Price point $297.', sourceUrl: 'https://competitor.com', category: 'competitor-watch', importance: 'hot', dateAdded: '2026-02-18' },
                { id: 'intel-4', title: 'New Productivity Tool Beta', summary: 'Notion-like tool with AI features entering beta. Could be good affiliate opportunity.', sourceUrl: 'https://newtool.com', category: 'opportunities', importance: 'reference', dateAdded: '2026-02-17' }
            ]),
            googleAlerts: Storage.get('googleAlerts', { date: null, alerts: [], summary: '' })
        };

        // ============================================
        // TIMELINE CONFIGURATION
        // ============================================
        
        const TimelineConfig = [
            {
                id: 'phase-1',
                title: 'Foundation Phase',
                dateRange: 'Feb 2026 - Mar 2026',
                description: 'Establish core systems, build infrastructure, and set up automation. Focus on creating a solid base for growth.',
                milestones: [
                    { id: 'm1', text: 'Set up Mission Control dashboard', completed: true },
                    { id: 'm2', text: 'Automate daily backups', completed: true },
                    { id: 'm3', text: 'Configure monitoring systems', completed: false },
                    { id: 'm4', text: 'Document all processes', completed: false }
                ]
            },
            {
                id: 'phase-2',
                title: 'Growth Phase',
                dateRange: 'Mar 2026 - Apr 2026',
                description: 'Accelerate income streams, launch projects, and optimize workflows. Focus on measurable growth toward the goal.',
                milestones: [
                    { id: 'm5', text: 'Launch HereBuzzer App', completed: false },
                    { id: 'm6', text: 'Complete car maintenance tasks', completed: false },
                    { id: 'm7', text: 'Deploy skillForge website', completed: false },
                    { id: 'm8', text: 'Reach 50% income target', completed: false }
                ]
            },
            {
                id: 'phase-3',
                title: 'Optimization Phase',
                dateRange: 'Apr 2026',
                description: 'Final push to reach the income goal by 04/13/2026. Review, optimize, and celebrate achievements.',
                milestones: [
                    { id: 'm9', text: 'Complete all pending projects', completed: false },
                    { id: 'm10', text: 'Achieve income target', completed: false },
                    { id: 'm11', text: 'Review and document learnings', completed: false },
                    { id: 'm12', text: 'Set next 90-day goals', completed: false }
                ]
            }
        ];

        // ============================================
        // TAB NAVIGATION
        // ============================================
        
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const targetTab = tab.dataset.tab;
                
                // Update active tab
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Update content
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                document.getElementById(targetTab).classList.add('active');
            });
        });

        // ============================================
        // DASHBOARD - LIVE DATETIME
        // ============================================
        
        function updateDateTime() {
            const now = new Date();
            document.getElementById('liveTime').textContent = formatTime(now);
            document.getElementById('liveDate').textContent = formatDate(now);
            document.getElementById('greeting').textContent = getGreeting();
        }

        setInterval(updateDateTime, 1000);
        updateDateTime();

        // ============================================
        // DASHBOARD - METRICS
        // ============================================
        
        function updateMetrics() {
            document.getElementById('incomeValue').textContent = `$${AppState.income.toLocaleString()}`;
            document.getElementById('activeProjects').textContent = '3'; // Placeholder
            document.getElementById('tasksToday').textContent = AppState.priorities.filter(p => !p.completed).length;
            document.getElementById('daysToGoal').textContent = daysUntil('2026-04-13');
        }

        // ============================================
        // PRIORITIES
        // ============================================
        
        function renderPriorities() {
            const list = document.getElementById('priorityList');
            
            if (AppState.priorities.length === 0) {
                list.innerHTML = '<div class="empty-state">No priorities set</div>';
                return;
            }
            
            list.innerHTML = AppState.priorities.map(priority => `
                <div class="priority-item ${priority.completed ? 'completed' : ''}" data-id="${priority.id}">
                    <div class="priority-checkbox ${priority.completed ? 'checked' : ''}" onclick="togglePriority('${priority.id}')"></div>
                    <span class="priority-text">${escapeHtml(priority.text)}</span>
                    <span class="priority-delete" onclick="deletePriority('${priority.id}')">×</span>
                </div>
            `).join('');
        }

        function addPriority() {
            const text = prompt('What is your priority?');
            if (text && text.trim()) {
                AppState.priorities.push({
                    id: generateId(),
                    text: text.trim(),
                    completed: false,
                    createdAt: new Date().toISOString()
                });
                Storage.set('priorities', AppState.priorities);
                renderPriorities();
                updateMetrics();
                addActivity('Added priority: ' + text.trim());
            }
        }

        function togglePriority(id) {
            const priority = AppState.priorities.find(p => p.id === id);
            if (priority) {
                priority.completed = !priority.completed;
                Storage.set('priorities', AppState.priorities);
                renderPriorities();
                updateMetrics();
                addActivity(priority.completed ? 'Completed: ' + priority.text : 'Reopened: ' + priority.text);
            }
        }

        function deletePriority(id) {
            const priority = AppState.priorities.find(p => p.id === id);
            AppState.priorities = AppState.priorities.filter(p => p.id !== id);
            Storage.set('priorities', AppState.priorities);
            renderPriorities();
            updateMetrics();
            if (priority) {
                addActivity('Deleted: ' + priority.text);
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // ============================================
        // ACTIVITY FEED
        // ============================================
        
        function renderActivities() {
            const list = document.getElementById('activityFeed');
            
            if (AppState.activities.length === 0) {
                list.innerHTML = '<div class="empty-state">No recent activity</div>';
                return;
            }
            
            list.innerHTML = AppState.activities.slice(0, 20).map(activity => `
                <div class="activity-item">
                    <div class="activity-icon" style="background: ${getActivityColor(activity.type)}">${activity.icon}</div>
                    <div class="activity-content">
                        <div class="activity-text">${escapeHtml(activity.text)}</div>
                        <div class="activity-time">${timeAgo(activity.timestamp)}</div>
                    </div>
                </div>
            `).join('');
        }

        function getActivityColor(type) {
            const colors = {
                'priority': 'rgba(255, 107, 157, 0.2)',
                'task': 'rgba(59, 130, 246, 0.2)',
                'note': 'rgba(16, 185, 129, 0.2)',
                'default': 'rgba(255, 255, 255, 0.1)'
            };
            return colors[type] || colors.default;
        }

        function addActivity(text, type = 'default', icon = '•') {
            AppState.activities.unshift({
                id: generateId(),
                text: text,
                type: type,
                icon: icon,
                timestamp: new Date().toISOString()
            });
            // Keep only last 50 activities
            if (AppState.activities.length > 50) {
                AppState.activities = AppState.activities.slice(0, 50);
            }
            Storage.set('activities', AppState.activities);
            renderActivities();
        }

        function clearActivity() {
            if (confirm('Clear all activity?')) {
                AppState.activities = [];
                Storage.set('activities', AppState.activities);
                renderActivities();
            }
        }

        // ============================================
        // NOTES
        // ============================================
        
        const notesArea = document.getElementById('notesArea');
        const notesStatus = document.getElementById('notesStatus');
        const charCount = document.getElementById('charCount');
        
        // Load saved notes
        notesArea.value = AppState.notes;
        updateNotesInfo();
        
        // Auto-save on every keystroke
        let saveTimeout;
        notesArea.addEventListener('input', () => {
            AppState.notes = notesArea.value;
            Storage.set('notes', AppState.notes);
            updateNotesInfo();
            notesStatus.textContent = 'Saving...';
            
            clearTimeout(saveTimeout);
            saveTimeout = setTimeout(() => {
                notesStatus.textContent = 'Saved';
            }, 500);
        });

        function updateNotesInfo() {
            charCount.textContent = `${AppState.notes.length} chars`;
        }

        // ============================================
        // KANBAN BOARD FUNCTIONS
        // ============================================
        
        function renderKanban() {
            const columns = {
                backlog: document.getElementById('backlogTasks'),
                inprogress: document.getElementById('inProgressTasks'),
                done: document.getElementById('doneTasks')
            };
            
            const counts = {
                backlog: 0,
                inprogress: 0,
                done: 0
            };
            
            // Clear columns
            Object.values(columns).forEach(col => col.innerHTML = '');
            
            // Sort tasks by creation date (newest first)
            const sortedTasks = [...AppState.tasks].sort((a, b) => 
                new Date(b.createdAt) - new Date(a.createdAt)
            );
            
            // Render tasks
            sortedTasks.forEach(task => {
                const taskEl = createTaskElement(task);
                if (columns[task.status]) {
                    columns[task.status].appendChild(taskEl);
                    counts[task.status]++;
                }
            });
            
            // Update counts
            document.getElementById('countBacklog').textContent = counts.backlog;
            document.getElementById('countInProgress').textContent = counts.inprogress;
            document.getElementById('countDone').textContent = counts.done;
            
            // Update active projects metric
            document.getElementById('activeProjects').textContent = counts.inprogress;
        }
        
        function createTaskElement(task) {
            const div = document.createElement('div');
            div.className = 'kanban-task';
            div.innerHTML = `
                <div class="kanban-task-delete" onclick="event.stopPropagation(); deleteTask('${task.id}')">×</div>
                <div class="kanban-task-title">${escapeHtml(task.title)}</div>
                ${task.description ? `<div class="kanban-task-desc">${escapeHtml(task.description)}</div>` : ''}
                <div class="kanban-task-meta">
                    <span class="priority-badge ${task.priority}">${task.priority}</span>
                    <span>${timeAgo(task.createdAt)}</span>
                </div>
            `;
            div.onclick = () => openTaskModal(null, task.id);
            return div;
        }
        
        function openTaskModal(status = null, taskId = null) {
            const modal = document.getElementById('taskModal');
            const form = document.getElementById('taskForm');
            const title = document.getElementById('modalTitle');
            
            form.reset();
            
            if (taskId) {
                // Edit mode
                const task = AppState.tasks.find(t => t.id === taskId);
                if (task) {
                    title.textContent = 'Edit Task';
                    document.getElementById('taskId').value = task.id;
                    document.getElementById('taskTitle').value = task.title;
                    document.getElementById('taskDesc').value = task.description || '';
                    document.getElementById('taskPriority').value = task.priority;
                    document.getElementById('taskStatusSelect').value = task.status;
                }
            } else {
                // New task mode
                title.textContent = 'New Task';
                document.getElementById('taskId').value = '';
                if (status) {
                    document.getElementById('taskStatusSelect').value = status;
                }
            }
            
            modal.classList.add('active');
        }
        
        function closeTaskModal() {
            document.getElementById('taskModal').classList.remove('active');
        }
        
        function saveTask(event) {
            event.preventDefault();
            
            const id = document.getElementById('taskId').value;
            const title = document.getElementById('taskTitle').value.trim();
            const description = document.getElementById('taskDesc').value.trim();
            const priority = document.getElementById('taskPriority').value;
            const status = document.getElementById('taskStatusSelect').value;
            
            if (id) {
                // Update existing task
                const task = AppState.tasks.find(t => t.id === id);
                if (task) {
                    const oldStatus = task.status;
                    task.title = title;
                    task.description = description;
                    task.priority = priority;
                    task.status = status;
                    task.updatedAt = new Date().toISOString();
                    
                    addActivity(`Updated task: ${title}`, 'task', '✏️');
                    
                    // Special message for status change
                    if (oldStatus !== status) {
                        const statusLabels = { backlog: 'Backlog', inprogress: 'In Progress', done: 'Done' };
                        addActivity(`Moved "${title}" to ${statusLabels[status]}`, 'task', '↔️');
                    }
                }
            } else {
                // Create new task
                const newTask = {
                    id: generateId(),
                    title: title,
                    description: description,
                    priority: priority,
                    status: status,
                    createdAt: new Date().toISOString()
                };
                AppState.tasks.push(newTask);
                addActivity(`Created task: ${title}`, 'task', '✨');
            }
            
            Storage.set('tasks', AppState.tasks);
            renderKanban();
            updateMetrics();
            closeTaskModal();
        }
        
        function deleteTask(id) {
            const task = AppState.tasks.find(t => t.id === id);
            if (task && confirm(`Delete task "${task.title}"?`)) {
                AppState.tasks = AppState.tasks.filter(t => t.id !== id);
                Storage.set('tasks', AppState.tasks);
                renderKanban();
                updateMetrics();
                addActivity(`Deleted task: ${task.title}`, 'task', '🗑️');
            }
        }
        
        // Close modal on overlay click
        document.getElementById('taskModal').addEventListener('click', (e) => {
            if (e.target.id === 'taskModal') {
                closeTaskModal();
            }
        });

        document.getElementById('sendTaskModal').addEventListener('click', (e) => {
            if (e.target.id === 'sendTaskModal') {
                closeSendTaskModal();
            }
        });

        document.getElementById('decisionModal').addEventListener('click', (e) => {
            if (e.target.id === 'decisionModal') {
                closeDecisionModal();
            }
        });

        // ============================================
        // TIMELINE FUNCTIONS
        // ============================================
        
        function renderTimeline() {
            const container = document.getElementById('timelineContainer');
            if (!container) return;
            
            // Load saved milestone states
            TimelineConfig.forEach(phase => {
                if (AppState.milestones[phase.id]) {
                    phase.milestones.forEach(milestone => {
                        if (AppState.milestones[phase.id][milestone.id] !== undefined) {
                            milestone.completed = AppState.milestones[phase.id][milestone.id];
                        }
                    });
                }
            });
            
            container.innerHTML = TimelineConfig.map((phase, index) => {
                // Check if phase is completed (all milestones done)
                const allMilestonesCompleted = phase.milestones.every(m => m.completed);
                const someMilestonesCompleted = phase.milestones.some(m => m.completed);
                
                // Determine phase status
                let phaseClass = '';
                let badgeClass = '';
                let badgeText = '';
                
                if (allMilestonesCompleted) {
                    phaseClass = 'completed';
                    badgeClass = 'completed';
                    badgeText = 'Completed';
                } else if (someMilestonesCompleted || index === 0) {
                    phaseClass = 'active';
                    badgeClass = 'current';
                    badgeText = 'Current';
                } else {
                    badgeClass = 'upcoming';
                    badgeText = 'Upcoming';
                }
                
                return `
                    <div class="timeline-phase ${phaseClass}" data-phase-id="${phase.id}">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <span class="timeline-badge ${badgeClass}">${badgeText}</span>
                            <div class="timeline-header">
                                <div>
                                    <div class="timeline-title">${escapeHtml(phase.title)}</div>
                                    <div class="timeline-date">${escapeHtml(phase.dateRange)}</div>
                                </div>
                            </div>
                            <div class="timeline-desc">${escapeHtml(phase.description)}</div>
                            <div class="timeline-milestones">
                                ${phase.milestones.map(milestone => `
                                    <div class="timeline-milestone">
                                        <div class="milestone-checkbox ${milestone.completed ? 'checked' : ''}" 
                                             onclick="toggleMilestone('${phase.id}', '${milestone.id}')"></div>
                                        <span class="milestone-text ${milestone.completed ? 'completed' : ''}">${escapeHtml(milestone.text)}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function toggleMilestone(phaseId, milestoneId) {
            const phase = TimelineConfig.find(p => p.id === phaseId);
            if (!phase) return;
            
            const milestone = phase.milestones.find(m => m.id === milestoneId);
            if (!milestone) return;
            
            // Toggle completion state
            milestone.completed = !milestone.completed;
            
            // Save to AppState
            if (!AppState.milestones[phaseId]) {
                AppState.milestones[phaseId] = {};
            }
            AppState.milestones[phaseId][milestoneId] = milestone.completed;
            Storage.set('milestones', AppState.milestones);
            
            // Re-render timeline
            renderTimeline();
            
            // Add activity
            const action = milestone.completed ? 'completed' : 'reopened';
            addActivity(`${action} milestone: ${milestone.text}`, 'milestone', milestone.completed ? '✅' : '🔄');
        }

        // ============================================
        // REVENUE FUNCTIONS
        // ============================================
        
        function updateRevenueGoal(value) {
            const goal = parseInt(value) || 10000;
            AppState.revenueGoal = goal;
            Storage.set('revenueGoal', goal);
            renderRevenue();
            addActivity(`Updated revenue goal to $${goal.toLocaleString()}`, 'revenue', '💰');
        }
        
        function calculateMRR() {
            return AppState.clients
                .filter(c => c.status === 'active')
                .reduce((sum, c) => sum + (parseInt(c.monthlyValue) || 0), 0);
        }
        
        function renderRevenue() {
            const mrr = calculateMRR();
            const goal = AppState.revenueGoal;
            const percentage = Math.min(100, Math.round((mrr / goal) * 100));
            
            // Update gauge
            const circumference = 2 * Math.PI * 45; // r=45
            const offset = circumference - (percentage / 100) * circumference;
            document.getElementById('revenueGaugeFill').style.strokeDashoffset = offset;
            document.getElementById('revenuePercentage').textContent = percentage + '%';
            
            // Update text
            document.getElementById('currentMRR').textContent = '$' + mrr.toLocaleString();
            document.getElementById('goalMRR').textContent = '$' + goal.toLocaleString();
            document.getElementById('revenueGoalInput').value = goal;
            
            // Projections
            const projectedAnnual = mrr * 12;
            document.getElementById('projectedAnnual').textContent = '$' + projectedAnnual.toLocaleString();
            
            const growthNeeded = Math.max(0, goal - mrr);
            document.getElementById('growthNeeded').textContent = '$' + growthNeeded.toLocaleString();
            
            // Active client count
            const activeCount = AppState.clients.filter(c => c.status === 'active').length;
            document.getElementById('activeClientCount').textContent = activeCount;
            
            // Update income value on dashboard too
            document.getElementById('incomeValue').textContent = '$' + mrr.toLocaleString();
            
            renderClients();
            renderRevenueChart();
        }
        
        function renderClients() {
            const list = document.getElementById('clientList');
            const totalMRR = calculateMRR();
            
            document.getElementById('totalMRR').textContent = 'Total MRR: $' + totalMRR.toLocaleString();
            
            if (AppState.clients.length === 0) {
                list.innerHTML = '<div class="empty-state">No clients yet. Add your first client!</div>';
                return;
            }
            
            list.innerHTML = AppState.clients.map(client => `
                <div class="client-item" data-id="${client.id}">
                    <div class="client-status ${client.status}"></div>
                    <div class="client-info">
                        <div class="client-name">${escapeHtml(client.name)}</div>
                        <div class="client-meta">Started: ${formatDate(client.startDate)} • ${client.status}</div>
                    </div>
                    <div class="client-value">$${parseInt(client.monthlyValue).toLocaleString()}/mo</div>
                    <div class="client-actions">
                        <button class="client-btn" onclick="editClient('${client.id}')">✏️</button>
                        <button class="client-btn delete" onclick="deleteClient('${client.id}')">🗑️</button>
                    </div>
                </div>
            `).join('');
        }
        
        function renderRevenueChart() {
            const chart = document.getElementById('revenueChart');
            
            // Generate sample data for last 6 months based on current clients
            const months = [];
            const values = [];
            const now = new Date();
            
            for (let i = 5; i >= 0; i--) {
                const d = new Date(now.getFullYear(), now.getMonth() - i, 1);
                months.push(d.toLocaleDateString('en-US', { month: 'short' }));
                
                // Calculate MRR for that month (simplified - use current MRR or simulated growth)
                const monthMRR = calculateMRR();
                values.push(monthMRR);
            }
            
            const maxValue = Math.max(...values, 1000);
            
            chart.innerHTML = values.map((val, idx) => {
                const height = (val / maxValue) * 100;
                return `
                    <div class="chart-bar-container">
                        <div class="chart-bar" style="height: ${height}%;" data-value="$${val.toLocaleString()}"></div>
                        <div class="chart-label">${months[idx]}</div>
                    </div>
                `;
            }).join('');
        }
        
        function openClientModal(clientId = null) {
            const modal = document.getElementById('clientModal');
            const form = document.getElementById('clientForm');
            const title = document.getElementById('clientModalTitle');
            
            if (clientId) {
                const client = AppState.clients.find(c => c.id === clientId);
                if (!client) return;
                
                title.textContent = 'Edit Client';
                document.getElementById('clientId').value = client.id;
                document.getElementById('clientName').value = client.name;
                document.getElementById('clientValue').value = client.monthlyValue;
                document.getElementById('clientStatus').value = client.status;
                document.getElementById('clientStartDate').value = client.startDate;
            } else {
                title.textContent = 'Add Client';
                form.reset();
                document.getElementById('clientId').value = '';
                document.getElementById('clientStartDate').value = new Date().toISOString().split('T')[0];
            }
            
            modal.classList.add('active');
        }
        
        function closeClientModal() {
            document.getElementById('clientModal').classList.remove('active');
        }
        
        function saveClient(event) {
            event.preventDefault();
            
            const id = document.getElementById('clientId').value;
            const name = document.getElementById('clientName').value.trim();
            const monthlyValue = parseInt(document.getElementById('clientValue').value) || 0;
            const status = document.getElementById('clientStatus').value;
            const startDate = document.getElementById('clientStartDate').value;
            
            if (!name) return;
            
            if (id) {
                // Edit existing
                const client = AppState.clients.find(c => c.id === id);
                if (client) {
                    client.name = name;
                    client.monthlyValue = monthlyValue;
                    client.status = status;
                    client.startDate = startDate;
                    addActivity(`Updated client: ${name}`, 'revenue', '👥');
                }
            } else {
                // Add new
                AppState.clients.push({
                    id: generateId(),
                    name,
                    monthlyValue,
                    status,
                    startDate
                });
                addActivity(`Added new client: ${name}`, 'revenue', '👥');
            }
            
            Storage.set('clients', AppState.clients);
            renderRevenue();
            closeClientModal();
        }
        
        function editClient(id) {
            openClientModal(id);
        }
        
        function deleteClient(id) {
            const client = AppState.clients.find(c => c.id === id);
            if (!client) return;
            
            if (confirm(`Delete client "${client.name}"?`)) {
                AppState.clients = AppState.clients.filter(c => c.id !== id);
                Storage.set('clients', AppState.clients);
                renderRevenue();
                addActivity(`Deleted client: ${client.name}`, 'revenue', '🗑️');
            }
        }

        // ============================================
        // COMMAND CENTER - AGENTS & DECISIONS
        // ============================================
        
        // Sample agents data
        const defaultAgents = [
            {
                id: 'agent-1',
                name: 'Clara',
                role: 'Executive Assistant',
                status: 'online',
                model: 'kimi-k2.5',
                description: 'Primary executive assistant for Jade. Handles daily operations, scheduling, and communications.',
                capabilities: ['Calendar management', 'Email drafting', 'Research', 'Task prioritization', 'Meeting notes'],
                activityLog: [
                    { text: 'Agent initialized', timestamp: new Date().toISOString() }
                ],
                performanceNotes: '',
                lastActive: new Date().toISOString()
            },
            {
                id: 'agent-2',
                name: 'Research Bot',
                role: 'Research Specialist',
                status: 'online',
                model: 'gpt-4o',
                description: 'Specialized in deep research and information gathering. Provides comprehensive analysis on any topic.',
                capabilities: ['Web research', 'Data analysis', 'Report generation', 'Trend identification', 'Competitive analysis'],
                activityLog: [
                    { text: 'Agent initialized', timestamp: new Date().toISOString() }
                ],
                performanceNotes: '',
                lastActive: new Date().toISOString()
            },
            {
                id: 'agent-3',
                name: 'Code Assistant',
                role: 'Developer',
                status: 'busy',
                model: 'claude-3.5',
                description: 'Full-stack development assistant. Specializes in web development, automation scripts, and debugging.',
                capabilities: ['Frontend development', 'Backend APIs', 'Database design', 'Code review', 'Debugging'],
                activityLog: [
                    { text: 'Agent initialized', timestamp: new Date().toISOString() }
                ],
                performanceNotes: '',
                lastActive: new Date().toISOString()
            },
            {
                id: 'agent-4',
                name: 'Creative AI',
                role: 'Content Creator',
                status: 'offline',
                model: 'kimi-k2.5',
                description: 'Creative content specialist for marketing, copywriting, and visual concepts.',
                capabilities: ['Copywriting', 'Social media content', 'Brand messaging', 'Visual concepts', 'Campaign ideas'],
                activityLog: [
                    { text: 'Agent initialized', timestamp: new Date().toISOString() }
                ],
                performanceNotes: '',
                lastActive: new Date(Date.now() - 86400000).toISOString() // 1 day ago
            }
        ];

        // Sample decisions data
        const defaultDecisions = [
            {
                id: 'dec-1',
                date: '2026-02-20',
                question: 'Should we launch the new feature?',
                decision: 'Yes, proceed with phased rollout starting next week',
                agentsConsulted: ['Clara', 'Research Bot']
            }
        ];

        // Initialize agents and decisions in AppState
        AppState.agents = Storage.get('agents', defaultAgents);
        AppState.decisions = Storage.get('decisions', defaultDecisions);
        AppState.selectedAgentId = null;

        let agentNotesTimeout;

        function renderAgents() {
            const grid = document.getElementById('agentsGrid');
            if (!grid) return;

            if (AppState.agents.length === 0) {
                grid.innerHTML = '<div class="empty-state">No agents configured</div>';
                return;
            }

            grid.innerHTML = AppState.agents.map((agent, index) => `
                <div class="agent-card stagger-${(index % 4) + 1}" onclick="openAgentPanel('${agent.id}')">
                    <div class="agent-header">
                        <div class="agent-avatar">🤖</div>
                        <div class="agent-info">
                            <div class="agent-name">${escapeHtml(agent.name)}</div>
                            <div class="agent-role">${escapeHtml(agent.role)}</div>
                        </div>
                    </div>
                    <div class="agent-status">
                        <span class="agent-status-dot ${agent.status}"></span>
                        <span>${agent.status.charAt(0).toUpperCase() + agent.status.slice(1)}</span>
                    </div>
                    <div class="agent-model">${escapeHtml(agent.model)}</div>
                    <div class="agent-last-active">Last active: ${timeAgo(agent.lastActive)}</div>
                </div>
            `).join('');
        }

        function openAgentPanel(agentId) {
            const agent = AppState.agents.find(a => a.id === agentId);
            if (!agent) return;

            AppState.selectedAgentId = agentId;

            // Populate panel
            document.getElementById('panelAgentName').textContent = agent.name;
            document.getElementById('panelAgentRole').textContent = agent.role;
            document.getElementById('panelAgentDescription').textContent = agent.description;
            
            // Status badge
            const statusBadge = document.getElementById('panelAgentStatus');
            statusBadge.textContent = agent.status.charAt(0).toUpperCase() + agent.status.slice(1);
            statusBadge.className = 'agent-status-badge ' + agent.status;

            // Capabilities
            const capabilitiesList = document.getElementById('panelAgentCapabilities');
            capabilitiesList.innerHTML = agent.capabilities.map(cap => `<li>${escapeHtml(cap)}</li>`).join('');

            // Activity log
            const activityLog = document.getElementById('panelAgentActivity');
            if (agent.activityLog && agent.activityLog.length > 0) {
                activityLog.innerHTML = agent.activityLog.slice().reverse().map(entry => `
                    <div class="activity-log-entry">
                        <div>${escapeHtml(entry.text)}</div>
                        <div class="activity-log-time">${timeAgo(entry.timestamp)}</div>
                    </div>
                `).join('');
            } else {
                activityLog.innerHTML = '<div class="empty-state">No activity yet</div>';
            }

            // Performance notes
            document.getElementById('panelAgentNotes').value = agent.performanceNotes || '';

            // Show panel
            document.getElementById('agentPanelOverlay').classList.add('active');
            document.getElementById('agentPanel').classList.add('active');
        }

        function closeAgentPanel() {
            document.getElementById('agentPanelOverlay').classList.remove('active');
            document.getElementById('agentPanel').classList.remove('active');
            AppState.selectedAgentId = null;
        }

        function saveAgentNotes() {
            if (!AppState.selectedAgentId) return;
            
            const agent = AppState.agents.find(a => a.id === AppState.selectedAgentId);
            if (!agent) return;

            const notes = document.getElementById('panelAgentNotes').value;
            agent.performanceNotes = notes;
            
            // Debounced save
            clearTimeout(agentNotesTimeout);
            agentNotesTimeout = setTimeout(() => {
                Storage.set('agents', AppState.agents);
                addActivity(`Updated notes for ${agent.name}`, 'agent', '📝');
            }, 500);
        }

        function openSendTaskModal() {
            if (!AppState.selectedAgentId) return;
            document.getElementById('sendTaskModal').classList.add('active');
        }

        function closeSendTaskModal() {
            document.getElementById('sendTaskModal').classList.remove('active');
            document.getElementById('taskDescription').value = '';
            document.getElementById('taskPriorityLevel').value = 'medium';
        }

        function sendTask(event) {
            event.preventDefault();
            
            if (!AppState.selectedAgentId) return;
            
            const agent = AppState.agents.find(a => a.id === AppState.selectedAgentId);
            if (!agent) return;

            const description = document.getElementById('taskDescription').value.trim();
            const priority = document.getElementById('taskPriorityLevel').value;

            if (!description) return;

            // Add to agent's activity log
            const entry = {
                text: `Received task [${priority.toUpperCase()}]: ${description}`,
                timestamp: new Date().toISOString()
            };
            agent.activityLog.push(entry);

            // Update agent status to busy temporarily
            const previousStatus = agent.status;
            agent.status = 'busy';
            agent.lastActive = new Date().toISOString();

            // Save to storage
            Storage.set('agents', AppState.agents);

            // Add to global activity
            addActivity(`Sent task to ${agent.name}: ${description}`, 'agent', '📨');

            // Re-render
            renderAgents();
            openAgentPanel(agent.id); // Refresh panel

            // Simulate agent completing task after delay
            setTimeout(() => {
                agent.status = previousStatus === 'offline' ? 'offline' : 'online';
                agent.activityLog.push({
                    text: `Completed task: ${description}`,
                    timestamp: new Date().toISOString()
                });
                Storage.set('agents', AppState.agents);
                renderAgents();
                if (AppState.selectedAgentId === agent.id) {
                    openAgentPanel(agent.id);
                }
            }, 30000); // 30 seconds

            closeSendTaskModal();
        }

        function renderDecisions() {
            const list = document.getElementById('decisionsList');
            if (!list) return;

            if (AppState.decisions.length === 0) {
                list.innerHTML = '<div class="empty-state">No decisions recorded yet</div>';
                return;
            }

            // Sort by date (newest first)
            const sortedDecisions = [...AppState.decisions].sort((a, b) => new Date(b.date) - new Date(a.date));

            list.innerHTML = sortedDecisions.map(decision => `
                <div class="decision-card">
                    <div class="decision-date">${formatDate(decision.date)}</div>
                    <div class="decision-question">${escapeHtml(decision.question)}</div>
                    <div class="decision-made">${escapeHtml(decision.decision)}</div>
                    <div class="decision-agents">
                        <span class="decision-agents-label">Consulted:</span>
                        ${decision.agentsConsulted.map(agent => `<span class="decision-agent-name">${escapeHtml(agent)}</span>`).join('')}
                    </div>
                </div>
            `).join('');
        }

        function openDecisionModal() {
            document.getElementById('decisionModal').classList.add('active');
            document.getElementById('decisionDate').value = new Date().toISOString().split('T')[0];
        }

        function closeDecisionModal() {
            document.getElementById('decisionModal').classList.remove('active');
            document.getElementById('decisionQuestion').value = '';
            document.getElementById('decisionMade').value = '';
            document.getElementById('decisionAgents').value = '';
        }

        function addDecision(event) {
            event.preventDefault();

            const date = document.getElementById('decisionDate').value;
            const question = document.getElementById('decisionQuestion').value.trim();
            const decision = document.getElementById('decisionMade').value.trim();
            const agentsInput = document.getElementById('decisionAgents').value.trim();

            if (!date || !question || !decision) return;

            const agentsConsulted = agentsInput 
                ? agentsInput.split(',').map(a => a.trim()).filter(a => a)
                : [];

            const newDecision = {
                id: generateId(),
                date,
                question,
                decision,
                agentsConsulted
            };

            AppState.decisions.push(newDecision);
            Storage.set('decisions', AppState.decisions);

            renderDecisions();
            addActivity(`Recorded decision: ${question}`, 'decision', '📋');
            closeDecisionModal();
        }

        // ============================================
        // KEYBOARD SHORTCUTS
        // ============================================
        
        document.addEventListener('keydown', (e) => {
            // Cmd/Ctrl + K to focus search
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }
            
            // Escape to close modals
            if (e.key === 'Escape') {
                closeTaskModal();
                closeAgentPanel();
                closeSendTaskModal();
                closeDecisionModal();
            }
        });

        // ============================================
        // INITIALIZATION
        // ============================================
        
        // ============================================
        // YOUTUBE FUNCTIONS
        // ============================================
        
        const Milestones = [
            { count: 100, title: "🌱 Seedling" },
            { count: 500, title: "🌿 Sprout" },
            { count: 1000, title: "⭐ Rising Creator" },
            { count: 5000, title: "🚀 Momentum Builder" },
            { count: 10000, title: "⚡ Growth Engine" },
            { count: 50000, title: "🔥 Content Machine" },
            { count: 100000, title: "👑 Influencer" },
            { count: 500000, title: "💫 Viral Sensation" },
            { count: 1000000, title: "🏆 YouTube Royalty" }
        ];

        let youtubeStats = JSON.parse(localStorage.getItem('missionControl_youtubeStats')) || {
            subscriberCount: 850,
            totalViews: 15000,
            videosPublished: 12
        };

        let videoIdeas = JSON.parse(localStorage.getItem('missionControl_videoIdeas')) || [
            { id: 'vid-1', title: 'My First Vlog - Day in the Life', topic: 'vlog', status: 'scripting', targetDate: '2026-03-15', notes: '' },
            { id: 'vid-2', title: 'How I Use AI for Content Creation', topic: 'tech', status: 'idea', targetDate: '2026-03-22', notes: '' },
            { id: 'vid-3', title: 'Studio Setup Tour 2026', topic: 'lifestyle', status: 'filming', targetDate: '2026-03-10', notes: '' }
        ];

        let calendarDate = new Date();
        let editingVideoId = null;

        function getCurrentMilestone(count) {
            for (let i = Milestones.length - 1; i >= 0; i--) {
                if (count >= Milestones[i].count) {
                    return Milestones[i];
                }
            }
            return { count: 0, title: "🌱 Seedling" };
        }

        function getNextMilestone(count) {
            for (let i = 0; i < Milestones.length; i++) {
                if (count < Milestones[i].count) {
                    return Milestones[i];
                }
            }
            return null;
        }

        function getProgressToNext(count) {
            const current = getCurrentMilestone(count);
            const next = getNextMilestone(count);
            if (!next) return 100;
            const range = next.count - current.count;
            const progress = count - current.count;
            return Math.min(100, Math.max(0, (progress / range) * 100));
        }

        function updateSubscriberCount() {
            const input = document.getElementById('subscriberCountInput');
            const count = parseInt(input.value) || 0;
            youtubeStats.subscriberCount = count;
            saveYoutubeData();
            renderGrowthTracker();
        }

        function renderGrowthTracker() {
            const count = youtubeStats.subscriberCount;
            const current = getCurrentMilestone(count);
            const next = getNextMilestone(count);
            const progress = getProgressToNext(count);

            document.getElementById('currentMilestone').textContent = current.title;
            document.getElementById('currentMilestoneDisplay').textContent = current.title;
            
            if (next) {
                document.getElementById('nextMilestone').textContent = `Next: ${next.title} (${next.count.toLocaleString()})`;
                document.getElementById('progressPercent').textContent = `${Math.round(progress)}% to next milestone`;
                document.getElementById('subscribersNeeded').textContent = `${(next.count - count).toLocaleString()} more needed`;
            } else {
                document.getElementById('nextMilestone').textContent = "🏆 Maximum level reached!";
                document.getElementById('progressPercent').textContent = "100% complete";
                document.getElementById('subscribersNeeded').textContent = "You're a legend!";
            }

            document.getElementById('xpProgressFill').style.width = `${progress}%`;
            document.getElementById('totalViews').textContent = youtubeStats.totalViews.toLocaleString();
            document.getElementById('videosPublished').textContent = youtubeStats.videosPublished;
            document.getElementById('avgViews').textContent = Math.round(youtubeStats.totalViews / Math.max(1, youtubeStats.videosPublished)).toLocaleString();
        }

        function renderVideoPipeline() {
            const statuses = ['idea', 'scripting', 'filming', 'editing', 'published'];
            
            statuses.forEach(status => {
                const container = document.getElementById(`pipeline-${status}`);
                const videos = videoIdeas.filter(v => v.status === status);
                document.getElementById(`count-${status}`).textContent = videos.length;
                
                container.innerHTML = videos.map(video => `
                    <div class="video-card status-${video.status}" data-id="${video.id}">
                        <div class="video-card-title">${escapeHtml(video.title)}</div>
                        <span class="video-card-topic ${video.topic}">${video.topic}</span>
                        <div class="video-card-date">📅 ${formatDate(video.targetDate)}</div>
                        <div class="video-card-actions">
                            ${status !== 'idea' ? `<button class="video-card-btn" onclick="moveVideo('${video.id}', '${getPrevStatus(status)}')" title="Move back">←</button>` : ''}
                            ${status !== 'published' ? `<button class="video-card-btn" onclick="moveVideo('${video.id}', '${getNextStatus(status)}')" title="Move forward">→</button>` : ''}
                            <button class="video-card-btn" onclick="editVideo('${video.id}')" title="Edit">✎</button>
                            <button class="video-card-btn delete" onclick="deleteVideo('${video.id}')" title="Delete">×</button>
                        </div>
                    </div>
                `).join('');
            });
        }

        function getPrevStatus(status) {
            const statuses = ['idea', 'scripting', 'filming', 'editing', 'published'];
            const idx = statuses.indexOf(status);
            return idx > 0 ? statuses[idx - 1] : status;
        }

        function getNextStatus(status) {
            const statuses = ['idea', 'scripting', 'filming', 'editing', 'published'];
            const idx = statuses.indexOf(status);
            return idx < statuses.length - 1 ? statuses[idx + 1] : status;
        }

        function moveVideo(id, newStatus) {
            const video = videoIdeas.find(v => v.id === id);
            if (video) {
                video.status = newStatus;
                if (newStatus === 'published') {
                    youtubeStats.videosPublished++;
                    saveYoutubeData();
                    renderGrowthTracker();
                }
                saveYoutubeData();
                renderVideoPipeline();
                renderContentCalendar();
            }
        }

        function editVideo(id) {
            editingVideoId = id;
            const video = videoIdeas.find(v => v.id === id);
            if (video) {
                document.getElementById('videoTitle').value = video.title;
                document.getElementById('videoTopic').value = video.topic;
                document.getElementById('videoStatus').value = video.status;
                document.getElementById('videoDate').value = video.targetDate;
                document.getElementById('videoNotes').value = video.notes || '';
                document.getElementById('videoModalTitle').textContent = 'Edit Video';
                document.getElementById('videoModal').classList.add('active');
            }
        }

        function deleteVideo(id) {
            if (confirm('Delete this video idea?')) {
                videoIdeas = videoIdeas.filter(v => v.id !== id);
                saveYoutubeData();
                renderVideoPipeline();
                renderContentCalendar();
            }
        }

        function openVideoModal(status = 'idea') {
            editingVideoId = null;
            document.getElementById('videoTitle').value = '';
            document.getElementById('videoTopic').value = 'lifestyle';
            document.getElementById('videoStatus').value = status;
            document.getElementById('videoDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('videoNotes').value = '';
            document.getElementById('videoModalTitle').textContent = 'New Video Idea';
            document.getElementById('videoModal').classList.add('active');
        }

        function closeVideoModal() {
            document.getElementById('videoModal').classList.remove('active');
        }

        function saveVideo(event) {
            event.preventDefault();
            
            const title = document.getElementById('videoTitle').value.trim();
            const topic = document.getElementById('videoTopic').value;
            const status = document.getElementById('videoStatus').value;
            const targetDate = document.getElementById('videoDate').value;
            const notes = document.getElementById('videoNotes').value.trim();
            
            if (!title || !targetDate) return;
            
            if (editingVideoId) {
                const video = videoIdeas.find(v => v.id === editingVideoId);
                if (video) {
                    video.title = title;
                    video.topic = topic;
                    video.status = status;
                    video.targetDate = targetDate;
                    video.notes = notes;
                }
            } else {
                videoIdeas.push({
                    id: 'vid-' + Date.now(),
                    title,
                    topic,
                    status,
                    targetDate,
                    notes
                });
            }
            
            saveYoutubeData();
            renderVideoPipeline();
            renderContentCalendar();
            closeVideoModal();
        }

        function renderContentCalendar() {
            const year = calendarDate.getFullYear();
            const month = calendarDate.getMonth();
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            
            document.getElementById('calendarMonth').textContent = `${monthNames[month]} ${year}`;
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDayOfWeek = firstDay.getDay();
            const daysInMonth = lastDay.getDate();
            
            const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            let html = dayHeaders.map(d => `<div class="calendar-day-header">${d}</div>`).join('');
            
            // Previous month days
            const prevMonthLastDay = new Date(year, month, 0).getDate();
            for (let i = startDayOfWeek - 1; i >= 0; i--) {
                html += `<div class="calendar-day other-month"><div class="calendar-day-number">${prevMonthLastDay - i}</div></div>`;
            }
            
            // Current month days
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const isToday = today.getDate() === day && today.getMonth() === month && today.getFullYear() === year;
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const dayVideos = videoIdeas.filter(v => v.targetDate === dateStr);
                
                html += `
                    <div class="calendar-day ${isToday ? 'today' : ''}">
                        <div class="calendar-day-number">${day}</div>
                        <div class="calendar-day-events">
                            ${dayVideos.map(v => `<div class="calendar-event ${v.status}">${escapeHtml(v.title.substring(0, 20))}${v.title.length > 20 ? '...' : ''}</div>`).join('')}
                        </div>
                    </div>
                `;
            }
            
            // Next month days to fill grid
            const remainingCells = 42 - (startDayOfWeek + daysInMonth);
            for (let day = 1; day <= remainingCells; day++) {
                html += `<div class="calendar-day other-month"><div class="calendar-day-number">${day}</div></div>`;
            }
            
            document.getElementById('calendarGrid').innerHTML = html;
        }

        function changeMonth(delta) {
            calendarDate.setMonth(calendarDate.getMonth() + delta);
            renderContentCalendar();
        }

        function saveYoutubeData() {
            localStorage.setItem('missionControl_videoIdeas', JSON.stringify(videoIdeas));
            localStorage.setItem('missionControl_youtubeStats', JSON.stringify(youtubeStats));
        }

        // ============================================
        
        document.addEventListener('DOMContentLoaded', () => {
            console.log('=== DOMContentLoaded fired ===');
            console.log('AppState at DOMContentLoaded:', AppState);
            console.log('intelItems at DOMContentLoaded:', AppState.intelItems);
            renderPriorities();
            renderActivities();
            renderKanban();
            renderTimeline();
            renderRevenue();
            renderAgents();
            renderDecisions();
            updateMetrics();
            
            // YouTube init
            renderGrowthTracker();
            renderVideoPipeline();
            renderContentCalendar();
            
            // Meetings init
            initMeetings();
            
            // Intel init  
            console.log('Calling initIntel() from DOMContentLoaded');
            initIntel();
            
            // Log initial activity
            if (AppState.activities.length === 0) {
                addActivity('Mission Control initialized', 'default', '🚀');
            }
        });

    // ==========================================
    // INTEL TAB FUNCTIONALITY
    // ==========================================
    
    // Intel Data - use AppState.intelItems
    // Ensure AppState.intelItems is initialized
    console.log('=== Intel initialization check ===');
    console.log('AppState.intelItems before check:', AppState.intelItems);
    if (!AppState.intelItems || AppState.intelItems.length === 0) {
        console.log('Initializing default intelItems');
        AppState.intelItems = [
        {
            id: 'intel-1',
            title: 'OpenAI Announces GPT-5 with Enhanced Reasoning',
            summary: 'OpenAI unveiled GPT-5 featuring significant improvements in logical reasoning, mathematical problem-solving, and code generation capabilities.',
            sourceUrl: 'https://openai.com/blog',
            category: 'ai-news',
            importance: 'hot',
            dateAdded: '2026-02-20'
        },
        {
            id: 'intel-2',
            title: 'AI Industry Reaches $200B Market Cap Milestone',
            summary: 'The AI industry has officially crossed the $200 billion market capitalization mark, driven by enterprise adoption and cloud AI services growth.',
            sourceUrl: 'https://example.com/industry-report',
            category: 'industry-trends',
            importance: 'notable',
            dateAdded: '2026-02-19'
        },
        {
            id: 'intel-3',
            title: 'Competitor X Launches New AI Coding Assistant',
            summary: 'Major competitor released an AI coding assistant with real-time collaboration features, potentially threatening market share.',
            sourceUrl: 'https://example.com/competitor-news',
            category: 'competitor-watch',
            importance: 'hot',
            dateAdded: '2026-02-18'
        },
        {
            id: 'intel-4',
            title: 'New Government AI Regulations Proposed',
            summary: 'Proposed regulations could create compliance opportunities for AI consulting and audit services.',
            sourceUrl: 'https://example.com/regulations',
            category: 'opportunities',
            importance: 'notable',
            dateAdded: '2026-02-17'
        },
        {
            id: 'intel-5',
            title: 'Research Paper: AI Model Efficiency Trends 2026',
            summary: 'Academic study analyzing the efficiency improvements in transformer architectures over the past year.',
            sourceUrl: 'https://example.com/research',
            category: 'ai-news',
            importance: 'reference',
            dateAdded: '2026-02-16'
        }];
    } else {
        console.log('intelItems already exists, count:', AppState.intelItems.length);
    }

    const IntelCategories = [
        { id: 'ai-news', name: '🤖 AI News', icon: '🤖' },
        { id: 'industry-trends', name: '📊 Industry Trends', icon: '📊' },
        { id: 'competitor-watch', name: '👁️ Competitor Watch', icon: '👁️' },
        { id: 'opportunities', name: '💎 Opportunities', icon: '💎' },
        { id: 'google-alerts', name: '📰 Google Alerts', icon: '📰' }
    ];

    const ImportanceLevels = {
        hot: { label: '🔥 Hot', color: '#ef4444' },
        notable: { label: '⚡ Notable', color: '#f59e0b' },
        reference: { label: '📌 Reference', color: '#3b82f6' }
    };

    let currentCategoryFilter = 'all';
    let currentImportanceFilter = 'all';
    let editingIntelId = null;

    // Initialize Intel Tab
    function initIntel() {
        console.log('=== initIntel() called ===');
        console.log('AppState.intelItems:', AppState.intelItems);
        console.log('AppState.intelItems length:', AppState.intelItems ? AppState.intelItems.length : 'undefined');
        renderIntel();
        setupIntelEventListeners();
    }

    function renderIntel() {
        console.log('=== renderIntel() called ===');
        loadGoogleAlerts(); // Load any saved Google Alerts
        renderGoogleAlerts();
        renderDailyBrief();
        renderIntelItems();
    }
    
    // Load Google Alerts from localStorage
    function loadGoogleAlerts() {
        const saved = localStorage.getItem('mc_googleAlerts');
        if (saved) {
            try {
                AppState.googleAlerts = JSON.parse(saved);
                console.log('Loaded Google Alerts:', AppState.googleAlerts);
            } catch (e) {
                console.error('Error loading Google Alerts:', e);
            }
        }
    }
    
    // Render Google Alerts section
    function renderGoogleAlerts() {
        const section = document.getElementById('googleAlertsSection');
        const dateEl = document.getElementById('googleAlertsDate');
        const itemsEl = document.getElementById('googleAlertsItems');
        
        if (!section || !dateEl || !itemsEl) return;
        
        // Check if we have fresh alerts (from today)
        if (!AppState.googleAlerts || !AppState.googleAlerts.alerts || AppState.googleAlerts.alerts.length === 0) {
            section.style.display = 'none';
            return;
        }
        
        const alertDate = new Date(AppState.googleAlerts.date);
        const today = new Date();
        const isToday = alertDate.toDateString() === today.toDateString();
        
        if (!isToday) {
            section.style.display = 'none';
            return;
        }
        
        section.style.display = 'block';
        dateEl.textContent = alertDate.toLocaleDateString('en-US', { 
            weekday: 'long', 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        });
        
        itemsEl.innerHTML = AppState.googleAlerts.alerts.map(alert => `
            <div class="google-alert-item">
                <div class="google-alert-icon">📰</div>
                <div class="google-alert-content">
                    <div class="google-alert-title">
                        <a href="${alert.url || '#' }" target="_blank" rel="noopener">${alert.title || 'News Alert'}</a>
                    </div>
                    <div class="brief-item-summary">${alert.summary || alert.description || ''}</div>
                    <div class="google-alert-source">${alert.source || 'Google Alerts'} · ${alertDate.toLocaleDateString()}</div>
                </div>
            </div>
        `).join('');
        
        // Add summary if available
        if (AppState.googleAlerts.summary) {
            itemsEl.innerHTML += `
                <div class="brief-item" style="margin-top: var(--spacing-md); border-color: var(--info);">
                    <div class="brief-item-importance">📝</div>
                    <div class="brief-item-content">
                        <div class="brief-item-title">Summary</div>
                        <div class="brief-item-summary">${AppState.googleAlerts.summary}</div>
                    </div>
                </div>
            `;
        }
    }

    function renderDailyBrief() {
        console.log('=== renderDailyBrief() called ===');
        const briefDate = document.getElementById('dailyBriefDate');
        const briefItems = document.getElementById('dailyBriefItems');
        console.log('dailyBriefDate element:', briefDate);
        console.log('dailyBriefItems element:', briefItems);
        
        if (briefDate) {
            briefDate.textContent = new Date().toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }
        
        if (briefItems) {
            const topItems = getDailyBriefItems();
            console.log('topItems for daily brief:', topItems);
            if (topItems.length === 0) {
                briefItems.innerHTML = '<div class="empty-state">No items for today\'s brief</div>';
                return;
            }
            
            briefItems.innerHTML = topItems.map(item => {
                const isGoogleAlert = item.category === 'google-alerts';
                const badge = isGoogleAlert ? '📰 Google Alerts' : ImportanceLevels[item.importance].label.split(' ')[0];
                return `
                <div class="brief-item ${isGoogleAlert ? 'google-alert' : ''}">
                    <div class="brief-item-importance">${badge}</div>
                    <div class="brief-item-content">
                        <div class="brief-item-title">
                            <a href="${item.sourceUrl}" target="_blank" rel="noopener">${item.title}</a>
                        </div>
                        <div class="brief-item-summary">${item.summary}</div>
                    </div>
                </div>
            `}).join('');
        }
    }

    function getDailyBriefItems() {
        // Sort by importance (hot first), then by date (newest first)
        const importanceOrder = { hot: 0, notable: 1, reference: 2 };
        let allItems = [...AppState.intelItems];
        
        // Add Google Alerts if available and from today
        if (AppState.googleAlerts && AppState.googleAlerts.alerts && AppState.googleAlerts.alerts.length > 0) {
            const alertDate = new Date(AppState.googleAlerts.date).toDateString();
            const today = new Date().toDateString();
            
            if (alertDate === today) {
                // Convert alerts to intel items format
                const alertItems = AppState.googleAlerts.alerts.map((alert, index) => ({
                    id: `google-alert-${index}`,
                    title: alert.title || 'Google Alert',
                    summary: alert.summary || alert.description || '',
                    sourceUrl: alert.url || '#',
                    category: 'google-alerts',
                    importance: 'hot',
                    dateAdded: AppState.googleAlerts.date
                }));
                
                allItems = [...alertItems, ...allItems];
            }
        }
        
        return allItems
            .sort((a, b) => {
                const importanceDiff = importanceOrder[a.importance] - importanceOrder[b.importance];
                if (importanceDiff !== 0) return importanceDiff;
                return new Date(b.dateAdded) - new Date(a.dateAdded);
            })
            .slice(0, 5);
    }

    function renderIntelItems() {
        console.log('=== renderIntelItems() called ===');
        const grid = document.getElementById('intelGrid');
        console.log('intelGrid element:', grid);
        if (!grid) {
            console.log('ERROR: intelGrid not found!');
            return;
        }
        
        console.log('AppState.intelItems:', AppState.intelItems);
        console.log('AppState.intelItems length:', AppState.intelItems ? AppState.intelItems.length : 'undefined');
        
        let filtered = AppState.intelItems;
        
        if (currentCategoryFilter !== 'all') {
            filtered = filtered.filter(item => item.category === currentCategoryFilter);
        }
        
        if (currentImportanceFilter !== 'all') {
            filtered = filtered.filter(item => item.importance === currentImportanceFilter);
        }
        
        // Sort by date (newest first)
        filtered.sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));
        
        if (filtered.length === 0) {
            grid.innerHTML = '<div class="empty-state" style="grid-column: 1/-1;">No intel items match your filters</div>';
            return;
        }
        
        grid.innerHTML = filtered.map((item, index) => `
            <div class="intel-card" style="animation-delay: ${index * 0.1}s">
                <div class="intel-card-header">
                    <div class="intel-card-badges">
                        <span class="intel-category-badge ${item.category}">
                            ${IntelCategories.find(c => c.id === item.category)?.name || item.category}
                        </span>
                        <span class="intel-importance-badge ${item.importance}">
                            ${ImportanceLevels[item.importance].label}
                        </span>
                    </div>
                </div>
                <div class="intel-card-title">
                    <a href="${item.sourceUrl}" target="_blank" rel="noopener">${item.title}</a>
                </div>
                <div class="intel-card-summary">${item.summary}</div>
                <div class="intel-card-footer">
                    <span class="intel-card-date">${formatDate(item.dateAdded)}</span>
                    <div class="intel-card-actions">
                        <button class="intel-card-btn" onclick="editIntelItem('${item.id}')" title="Edit">✏️</button>
                        <button class="intel-card-btn delete" onclick="deleteIntelItem('${item.id}')" title="Delete">🗑️</button>
                    </div>
                </div>
            </div>
        `).join('');
    }

    function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
    }

    function setupIntelEventListeners() {
        // Category tabs
        document.querySelectorAll('.intel-category-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.intel-category-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentCategoryFilter = tab.dataset.category;
                renderIntelItems();
            });
        });
        
        // Importance filters
        document.querySelectorAll('.importance-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.importance-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentImportanceFilter = btn.dataset.importance;
                renderIntelItems();
            });
        });
    }

    function filterByCategory(category) {
        currentCategoryFilter = category;
        renderIntelItems();
    }

    function filterByImportance(importance) {
        currentImportanceFilter = importance;
        renderIntelItems();
    }

    function clearFilters() {
        currentCategoryFilter = 'all';
        currentImportanceFilter = 'all';
        
        document.querySelectorAll('.intel-category-tab').forEach(t => t.classList.remove('active'));
        document.querySelector('.intel-category-tab[data-category="all"]').classList.add('active');
        
        document.querySelectorAll('.importance-btn').forEach(b => b.classList.remove('active'));
        document.querySelector('.importance-btn[data-importance="all"]').classList.add('active');
        
        renderIntelItems();
    }

    function openIntelModal() {
        editingIntelId = null;
        document.getElementById('intelForm').reset();
        document.getElementById('intelModal').classList.add('active');
    }

    function closeIntelModal() {
        document.getElementById('intelModal').classList.remove('active');
        editingIntelId = null;
    }

    function saveIntelItem(event) {
        event.preventDefault();
        
        const title = document.getElementById('intelTitle').value;
        const summary = document.getElementById('intelSummary').value;
        const sourceUrl = document.getElementById('intelSourceUrl').value;
        const category = document.getElementById('intelCategory').value;
        const importance = document.querySelector('input[name="intelImportance"]:checked').value;
        
        const item = {
            id: editingIntelId || 'intel-' + Date.now(),
            title,
            summary,
            sourceUrl,
            category,
            importance,
            dateAdded: editingIntelId ? 
                AppState.intelItems.find(i => i.id === editingIntelId).dateAdded : 
                new Date().toISOString().split('T')[0]
        };
        
        if (editingIntelId) {
            const index = AppState.intelItems.findIndex(i => i.id === editingIntelId);
            if (index !== -1) {
                AppState.intelItems[index] = item;
            }
        } else {
            AppState.intelItems.unshift(item);
        }
        
        Storage.set('intelItems', AppState.intelItems);
        
        closeIntelModal();
        renderIntel();
    }

    function editIntelItem(id) {
        const item = AppState.intelItems.find(i => i.id === id);
        if (!item) return;
        
        editingIntelId = id;
        document.getElementById('intelTitle').value = item.title;
        document.getElementById('intelSummary').value = item.summary;
        document.getElementById('intelSourceUrl').value = item.sourceUrl;
        document.getElementById('intelCategory').value = item.category;
        
        const radio = document.querySelector(`input[name="intelImportance"][value="${item.importance}"]`);
        if (radio) radio.checked = true;
        
        document.getElementById('intelModal').classList.add('active');
    }

    function deleteIntelItem(id) {
        if (!confirm('Are you sure you want to delete this intel item?')) return;
        
        AppState.intelItems = AppState.intelItems.filter(i => i.id !== id);
        Storage.set('intelItems', AppState.intelItems);
        renderIntel();
    }

    // Initialize Intel when tab is clicked
    document.querySelector('[data-tab="intel"]')?.addEventListener('click', function() {
        initIntel();
    });

    // Also init if Intel tab is active on load
    console.log('=== End of script Intel check ===');
    console.log('Intel tab active check:', document.getElementById('intel')?.classList.contains('active'));
    if (document.getElementById('intel')?.classList.contains('active')) {
        console.log('Intel tab is active on load, calling initIntel()');
        initIntel();
    }
    </script>
    <!-- MEETING MODAL -->
    <div class="modal-overlay" id="meetingModal" onclick="closeMeetingModal(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title" id="meetingModalTitle">Add Meeting</div>
                <div class="modal-close" onclick="closeMeetingModal()">✕</div>
            </div>
            <form id="meetingForm" onsubmit="saveMeeting(event)">
                <input type="hidden" id="meetingId">
                <div class="meeting-modal-grid">
                    <div class="form-group full-width">
                        <label class="form-label">Meeting Title</label>
                        <input type="text" class="form-input" id="meetingTitle" required placeholder="Enter meeting title">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Date</label>
                        <input type="date" class="form-input" id="meetingDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Time</label>
                        <input type="time" class="form-input" id="meetingTime" required>
                    </div>
                    <div class="form-group full-width">
                        <label class="form-label">Attendees (comma-separated)</label>
                        <input type="text" class="form-input" id="meetingAttendees" placeholder="John Doe, Jane Smith">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Meeting Type</label>
                        <select class="form-select" id="meetingType">
                            <option value="call">📞 Call</option>
                            <option value="zoom">💻 Zoom</option>
                            <option value="in-person">🏢 In-Person</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Prep Notes</label>
                        <input type="text" class="form-input" id="meetingPrepNotes" placeholder="Review documents before meeting">
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeMeetingModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Meeting</button>
                </div>
            </form>
        </div>
    </div>

    <script>
    // ============================================
    // MEETINGS MANAGEMENT
    // ============================================

    let meetings = [];
    let expandedMeetingId = null;

    const STORAGE_KEY = 'missionControl_meetings';

    // Sample meetings data
    const sampleMeetings = [
        {
            id: 'mtg-1',
            title: 'Client Kickoff - ABC Corp',
            date: new Date().toISOString().split('T')[0], // Today
            time: '14:00',
            attendees: ['Sarah Johnson', 'Mike Chen'],
            type: 'zoom',
            prepNotes: 'Review proposal beforehand and prepare timeline deck',
            agenda: [
                { id: 'ag-1', text: 'Introductions', completed: false },
                { id: 'ag-2', text: 'Project scope review', completed: false },
                { id: 'ag-3', text: 'Timeline discussion', completed: false }
            ],
            notes: '',
            actionItems: []
        },
        {
            id: 'mtg-2',
            title: 'Team Sync - Product Roadmap',
            date: new Date(Date.now() + 86400000).toISOString().split('T')[0], // Tomorrow
            time: '10:00',
            attendees: ['Alex Rivera', 'Jordan Park'],
            type: 'call',
            prepNotes: 'Update roadmap spreadsheet',
            agenda: [
                { id: 'ag-4', text: 'Sprint review', completed: false },
                { id: 'ag-5', text: 'Q2 priorities', completed: false }
            ],
            notes: '',
            actionItems: []
        },
        {
            id: 'mtg-3',
            title: 'Board Meeting - Quarterly Review',
            date: new Date(Date.now() - 172800000).toISOString().split('T')[0], // 2 days ago
            time: '09:00',
            attendees: ['Board Members', 'CFO', 'CTO'],
            type: 'in-person',
            prepNotes: 'Prepare financial reports and KPI dashboard',
            agenda: [
                { id: 'ag-6', text: 'Financial review', completed: true },
                { id: 'ag-7', text: 'Product updates', completed: true },
                { id: 'ag-8', text: 'Strategic planning', completed: true }
            ],
            notes: 'Quarterly targets exceeded by 15%. Strong growth in enterprise segment.',
            actionItems: ['Prepare Q3 forecast', 'Schedule follow-up with investors']
        }
    ];

    // Initialize meetings
    function initMeetings() {
        const stored = localStorage.getItem(STORAGE_KEY);
        if (stored) {
            meetings = JSON.parse(stored);
        } else {
            meetings = [...sampleMeetings];
            saveMeetingsToStorage();
        }
        renderMeetings();
    }

    function saveMeetingsToStorage() {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(meetings));
    }

    function renderMeetings() {
        renderTodayMeetings();
        renderUpcomingMeetings();
        renderPastMeetings();
    }

    function renderTodayMeetings() {
        const today = new Date().toISOString().split('T')[0];
        const todayMeetings = meetings.filter(m => m.date === today).sort((a, b) => a.time.localeCompare(b.time));
        
        const container = document.getElementById('todayMeetingsList');
        const countEl = document.getElementById('todayMeetingsCount');
        
        if (!container || !countEl) return;
        
        countEl.textContent = todayMeetings.length;
        
        if (todayMeetings.length === 0) {
            container.innerHTML = `
                <div class="empty-state" style="padding: var(--spacing-lg);">
                    <p>No meetings scheduled for today 🎉</p>
                </div>
            `;
            return;
        }
        
        container.innerHTML = todayMeetings.map((meeting, index) => `
            <div class="today-meeting-card" style="animation-delay: ${index * 0.1}s;">
                <div class="meeting-time-block">
                    <div class="meeting-time">${formatTime(meeting.time)}</div>
                    <div class="meeting-countdown">${getCountdown(meeting.date, meeting.time)}</div>
                </div>
                <div class="meeting-info">
                    <div class="meeting-title">${escapeHtml(meeting.title)}</div>
                    <div class="meeting-attendees">${escapeHtml(meeting.attendees.join(', '))}</div>
                </div>
                <div class="meeting-type-badge ${meeting.type}">
                    ${getMeetingTypeIcon(meeting.type)} ${capitalize(meeting.type)}
                </div>
            </div>
        `).join('');
    }

    function renderUpcomingMeetings() {
        const today = new Date().toISOString().split('T')[0];
        const upcoming = meetings.filter(m => m.date > today).sort((a, b) => {
            const dateCompare = a.date.localeCompare(b.date);
            return dateCompare !== 0 ? dateCompare : a.time.localeCompare(b.time);
        });
        
        const container = document.getElementById('upcomingMeetingsList');
        if (!container) return;
        
        if (upcoming.length === 0) {
            container.innerHTML = `
                <div class="empty-state">
                    <p>No upcoming meetings scheduled</p>
                    <button class="btn btn-primary" style="margin-top: var(--spacing-md);" onclick="openMeetingModal()">
                        Schedule Your First Meeting
                    </button>
                </div>
            `;
            return;
        }
        
        container.innerHTML = upcoming.map((meeting, index) => createMeetingCard(meeting, index)).join('');
    }

    function renderPastMeetings() {
        const today = new Date().toISOString().split('T')[0];
        const past = meetings.filter(m => m.date < today).sort((a, b) => b.date.localeCompare(a.date));
        
        const container = document.getElementById('pastMeetingsList');
        if (!container) return;
        
        if (past.length === 0) {
            container.innerHTML = `
                <div class="empty-state" style="padding: var(--spacing-md);">
                    <p style="font-size: 0.9rem;">No past meetings yet</p>
                </div>
            `;
            return;
        }
        
        container.innerHTML = past.map((meeting, index) => createPastMeetingCard(meeting, index)).join('');
    }

    function createMeetingCard(meeting, index) {
        const isExpanded = expandedMeetingId === meeting.id;
        const dateObj = new Date(meeting.date + 'T' + meeting.time);
        const dateStr = dateObj.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
        
        return `
            <div class="meeting-card ${isExpanded ? 'expanded' : ''}" style="animation-delay: ${index * 0.1}s;" data-id="${meeting.id}">
                <div class="meeting-card-header">
                    <div class="meeting-card-main">
                        <div class="meeting-card-title">${escapeHtml(meeting.title)}</div>
                        <div class="meeting-card-meta">
                            <span>📅 ${dateStr}</span>
                            <span>🕐 ${formatTime(meeting.time)}</span>
                            <span>👥 ${meeting.attendees.length} attendees</span>
                        </div>
                        ${meeting.prepNotes ? `
                            <div class="meeting-card-preview">
                                📝 ${escapeHtml(truncateText(meeting.prepNotes, 80))}
                            </div>
                        ` : ''}
                    </div>
                    <div class="meeting-type-badge ${meeting.type}">
                        ${getMeetingTypeIcon(meeting.type)} ${capitalize(meeting.type)}
                    </div>
                    <button class="meeting-expand-btn ${isExpanded ? 'expanded' : ''}" onclick="toggleMeetingExpand('${meeting.id}')">
                        ▼
                    </button>
                </div>
                <div class="meeting-details ${isExpanded ? 'expanded' : ''}">
                    <div class="meeting-details-grid">
                        <div class="meeting-detail-section">
                            <h4>📋 Agenda</h4>
                            <div class="agenda-list" id="agenda-${meeting.id}">
                                ${meeting.agenda.map(item => `
                                    <div class="agenda-item">
                                        <div class="agenda-checkbox ${item.completed ? 'checked' : ''}" onclick="toggleAgendaItem('${meeting.id}', '${item.id}')"></div>
                                        <div class="agenda-text ${item.completed ? 'completed' : ''}">${escapeHtml(item.text)}</div>
                                        <div class="agenda-delete" onclick="deleteAgendaItem('${meeting.id}', '${item.id}')">🗑</div>
                                    </div>
                                `).join('')}
                            </div>
                            <button class="add-agenda-btn" onclick="addAgendaItem('${meeting.id}')">+ Add Agenda Item</button>
                        </div>
                        <div class="meeting-detail-section">
                            <h4>📝 Notes</h4>
                            <textarea class="meeting-notes" placeholder="Take meeting notes here..." 
                                oninput="updateMeetingNotes('${meeting.id}', this.value)">${escapeHtml(meeting.notes)}</textarea>
                        </div>
                        <div class="meeting-detail-section">
                            <h4>✅ Action Items</h4>
                            <div class="action-items-list" id="actions-${meeting.id}">
                                ${meeting.actionItems.map((item, idx) => `
                                    <div class="action-item">
                                        <input type="text" class="action-item-input" value="${escapeHtml(item)}" 
                                            onchange="updateActionItem('${meeting.id}', ${idx}, this.value)">
                                        <div class="action-item-delete" onclick="deleteActionItem('${meeting.id}', ${idx})">🗑</div>
                                    </div>
                                `).join('')}
                            </div>
                            <button class="add-action-btn" onclick="addActionItem('${meeting.id}')">+ Add Action Item</button>
                        </div>
                        <div class="meeting-detail-section">
                            <h4>👥 Attendees</h4>
                            <p style="font-size: 0.9rem; color: var(--text-secondary);">
                                ${meeting.attendees.map(a => escapeHtml(a)).join('<br>')}
                            </p>
                            ${meeting.prepNotes ? `
                                <h4 style="margin-top: var(--spacing-md);">📝 Prep Notes</h4>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">${escapeHtml(meeting.prepNotes)}</p>
                            ` : ''}
                        </div>
                    </div>
                    <div class="meeting-actions">
                        <button class="btn btn-secondary btn-sm" onclick="openMeetingModal('${meeting.id}')">Edit</button>
                        <button class="btn btn-secondary btn-sm" style="color: var(--danger);" onclick="deleteMeeting('${meeting.id}')">Delete</button>
                    </div>
                </div>
            </div>
        `;
    }

    function createPastMeetingCard(meeting, index) {
        const dateObj = new Date(meeting.date + 'T' + meeting.time);
        const dateStr = dateObj.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' });
        
        return `
            <div class="past-meeting-card" style="animation-delay: ${index * 0.05}s;">
                <div class="meeting-card-header">
                    <div class="meeting-card-main">
                        <div class="meeting-card-title">${escapeHtml(meeting.title)}</div>
                        <div class="meeting-card-meta">
                            <span>📅 ${dateStr}</span>
                            <span>🕐 ${formatTime(meeting.time)}</span>
                            <span>✅ ${meeting.agenda.filter(a => a.completed).length}/${meeting.agenda.length} agenda items</span>
                        </div>
                        ${meeting.notes ? `
                            <div class="meeting-card-preview">
                                📝 ${escapeHtml(truncateText(meeting.notes, 100))}
                            </div>
                        ` : ''}
                    </div>
                    <div class="meeting-type-badge ${meeting.type}">
                        ${getMeetingTypeIcon(meeting.type)} ${capitalize(meeting.type)}
                    </div>
                </div>
            </div>
        `;
    }

    function toggleMeetingExpand(meetingId) {
        expandedMeetingId = expandedMeetingId === meetingId ? null : meetingId;
        renderUpcomingMeetings();
    }

    function togglePastMeetings() {
        const content = document.getElementById('pastMeetingsContent');
        const toggle = document.getElementById('pastMeetingsToggle');
        if (content && toggle) {
            content.classList.toggle('expanded');
            toggle.classList.toggle('expanded');
        }
    }

    function openMeetingModal(meetingId = null) {
        const modal = document.getElementById('meetingModal');
        const form = document.getElementById('meetingForm');
        const title = document.getElementById('meetingModalTitle');
        
        if (!modal) return;
        
        if (meetingId) {
            const meeting = meetings.find(m => m.id === meetingId);
            if (meeting) {
                title.textContent = 'Edit Meeting';
                document.getElementById('meetingId').value = meeting.id;
                document.getElementById('meetingTitle').value = meeting.title;
                document.getElementById('meetingDate').value = meeting.date;
                document.getElementById('meetingTime').value = meeting.time;
                document.getElementById('meetingAttendees').value = meeting.attendees.join(', ');
                document.getElementById('meetingType').value = meeting.type;
                document.getElementById('meetingPrepNotes').value = meeting.prepNotes;
            }
        } else {
            title.textContent = 'Add Meeting';
            form.reset();
            document.getElementById('meetingId').value = '';
            document.getElementById('meetingDate').value = new Date().toISOString().split('T')[0];
        }
        
        modal.classList.add('active');
    }

    function closeMeetingModal(event) {
        if (!event || event.target.id === 'meetingModal' || event.target.classList.contains('modal-close')) {
            const modal = document.getElementById('meetingModal');
            if (modal) modal.classList.remove('active');
        }
    }

    function saveMeeting(event) {
        event.preventDefault();
        
        const id = document.getElementById('meetingId').value;
        const title = document.getElementById('meetingTitle').value;
        const date = document.getElementById('meetingDate').value;
        const time = document.getElementById('meetingTime').value;
        const attendeesStr = document.getElementById('meetingAttendees').value;
        const type = document.getElementById('meetingType').value;
        const prepNotes = document.getElementById('meetingPrepNotes').value;
        
        const attendees = attendeesStr.split(',').map(a => a.trim()).filter(a => a);
        
        if (id) {
            const index = meetings.findIndex(m => m.id === id);
            if (index !== -1) {
                meetings[index] = {
                    ...meetings[index],
                    title,
                    date,
                    time,
                    attendees,
                    type,
                    prepNotes
                };
            }
        } else {
            const newMeeting = {
                id: 'mtg-' + Date.now(),
                title,
                date,
                time,
                attendees,
                type,
                prepNotes,
                agenda: [],
                notes: '',
                actionItems: []
            };
            meetings.push(newMeeting);
        }
        
        saveMeetingsToStorage();
        renderMeetings();
        closeMeetingModal();
    }

    function deleteMeeting(meetingId) {
        if (confirm('Are you sure you want to delete this meeting?')) {
            meetings = meetings.filter(m => m.id !== meetingId);
            if (expandedMeetingId === meetingId) expandedMeetingId = null;
            saveMeetingsToStorage();
            renderMeetings();
        }
    }

    function addAgendaItem(meetingId) {
        const meeting = meetings.find(m => m.id === meetingId);
        if (!meeting) return;
        
        const text = prompt('Enter agenda item:');
        if (text && text.trim()) {
            meeting.agenda.push({
                id: 'ag-' + Date.now(),
                text: text.trim(),
                completed: false
            });
            saveMeetingsToStorage();
            renderUpcomingMeetings();
            expandedMeetingId = meetingId;
        }
    }

    function toggleAgendaItem(meetingId, agendaId) {
        const meeting = meetings.find(m => m.id === meetingId);
        if (!meeting) return;
        
        const item = meeting.agenda.find(a => a.id === agendaId);
        if (item) {
            item.completed = !item.completed;
            saveMeetingsToStorage();
            renderUpcomingMeetings();
            expandedMeetingId = meetingId;
        }
    }

    function deleteAgendaItem(meetingId, agendaId) {
        const meeting = meetings.find(m => m.id === meetingId);
        if (!meeting) return;
        
        meeting.agenda = meeting.agenda.filter(a => a.id !== agendaId);
        saveMeetingsToStorage();
        renderUpcomingMeetings();
        expandedMeetingId = meetingId;
    }

    function updateMeetingNotes(meetingId, notes) {
        const meeting = meetings.find(m => m.id === meetingId);
        if (meeting) {
            meeting.notes = notes;
            saveMeetingsToStorage();
        }
    }

    function addActionItem(meetingId) {
        const meeting = meetings.find(m => m.id === meetingId);
        if (!meeting) return;
        
        const text = prompt('Enter action item:');
        if (text && text.trim()) {
            meeting.actionItems.push(text.trim());
            saveMeetingsToStorage();
            renderUpcomingMeetings();
            expandedMeetingId = meetingId;
        }
    }

    function updateActionItem(meetingId, index, value) {
        const meeting = meetings.find(m => m.id === meetingId);
        if (meeting && meeting.actionItems[index] !== undefined) {
            meeting.actionItems[index] = value;
            saveMeetingsToStorage();
        }
    }

    function deleteActionItem(meetingId, index) {
        const meeting = meetings.find(m => m.id === meetingId);
        if (!meeting) return;
        
        meeting.actionItems.splice(index, 1);
        saveMeetingsToStorage();
        renderUpcomingMeetings();
        expandedMeetingId = meetingId;
    }

    function getCountdown(date, time) {
        const now = new Date();
        const meetingDate = new Date(date + 'T' + time);
        const diff = meetingDate - now;
        
        if (diff < 0) return 'Started';
        
        const hours = Math.floor(diff / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        
        if (hours > 24) {
            const days = Math.floor(hours / 24);
            return `In ${days}d ${hours % 24}h`;
        }
        if (hours > 0) {
            return `In ${hours}h ${minutes}m`;
        }
        return `In ${minutes}m`;
    }

    function formatTime(timeStr) {
        const [hours, minutes] = timeStr.split(':');
        const hour = parseInt(hours);
        const ampm = hour >= 12 ? 'PM' : 'AM';
        const displayHour = hour % 12 || 12;
        return `${displayHour}:${minutes} ${ampm}`;
    }

    function getMeetingTypeIcon(type) {
        const icons = {
            'call': '📞',
            'zoom': '💻',
            'in-person': '🏢'
        };
        return icons[type] || '📅';
    }

    function capitalize(str) {
        return str.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
    }

    function truncateText(text, maxLength) {
        if (!text || text.length <= maxLength) return text;
        return text.substring(0, maxLength) + '...';
    }

    function escapeHtml(text) {
        if (!text) return '';
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }


    // ============================================
    // SERVER INTEGRATION - SYNC & BACKUP
    // ============================================
    
    const SERVER_CONFIG = {
        baseUrl: 'http://localhost:8899',
        city: 'Portland', // Change this to your city
        syncInterval: 5 * 60 * 1000, // 5 minutes
        retryInterval: 30 * 1000, // 30 seconds on error
        maxRetries: 3
    };
    
    let serverState = {
        isOnline: false,
        lastSync: null,
        retryCount: 0,
        syncInProgress: false
    };
    
    // Initialize server sync on page load
    document.addEventListener('DOMContentLoaded', function() {
        initServerSync();
    });
    
    async function initServerSync() {
        // 1. Fetch server data and merge with localStorage (server = backup, localStorage = primary)
        await fetchServerData();
        
        // 2. Start periodic backup sync (every 5 minutes)
        setInterval(syncToServer, SERVER_CONFIG.syncInterval);
        
        // 3. Fetch weather
        await fetchWeather();
        
        // 4. Check server connectivity periodically
        setInterval(checkServerHealth, 60000);
    }
    
    // Fetch data from server and merge with localStorage
    async function fetchServerData() {
        try {
            const response = await fetch(`${SERVER_CONFIG.baseUrl}/mc/data`, {
                method: 'GET',
                headers: { 'Content-Type': 'application/json' }
            });
            
            if (!response.ok) {
                throw new Error(`Server responded with ${response.status}`);
            }
            
            const serverData = await response.json();
            
            // Merge strategy: localStorage is primary, server is backup
            // Only restore from server if localStorage is empty for a key
            let hasChanges = false;
            
            const keys = ['mc_priorities', 'mc_tasks', 'mc_meetings', 'mc_notes', 
                          'mc_agents', 'mc_decisions', 'mc_ideas', 'mc_settings'];
            
            keys.forEach(key => {
                const localValue = localStorage.getItem(key);
                const serverValue = serverData[key];
                
                if (!localValue && serverValue) {
                    // Restore from backup
                    localStorage.setItem(key, JSON.stringify(serverValue));
                    hasChanges = true;
                    logActivity(`Restored ${key} from server backup`);
                }
            });
            
            // Update AppState if we restored data
            if (hasChanges) {
                loadFromStorage();
                renderAll();
            }
            
            updateServerStatus(true, 'Connected');
            
        } catch (error) {
            console.log('Server fetch failed (using localStorage only):', error.message);
            updateServerStatus(false, 'Offline');
        }
    }
    
    // Sync current localStorage state to server as backup
    async function syncToServer() {
        if (serverState.syncInProgress) return;
        serverState.syncInProgress = true;
        
        try {
            // Collect all localStorage MC data
            const dataToSync = {};
            const keys = ['mc_priorities', 'mc_tasks', 'mc_meetings', 'mc_notes', 
                          'mc_agents', 'mc_decisions', 'mc_ideas', 'mc_settings'];
            
            keys.forEach(key => {
                const value = localStorage.getItem(key);
                if (value) {
                    dataToSync[key] = JSON.parse(value);
                }
            });
            
            const response = await fetch(`${SERVER_CONFIG.baseUrl}/mc/data`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(dataToSync)
            });
            
            if (!response.ok) {
                throw new Error(`Server responded with ${response.status}`);
            }
            
            serverState.lastSync = new Date();
            serverState.retryCount = 0;
            updateServerStatus(true, 'Synced');
            
        } catch (error) {
            console.log('Server sync failed:', error.message);
            serverState.retryCount++;
            updateServerStatus(false, 'Sync failed');
            
            // Retry logic
            if (serverState.retryCount < SERVER_CONFIG.maxRetries) {
                setTimeout(syncToServer, SERVER_CONFIG.retryInterval);
            }
        } finally {
            serverState.syncInProgress = false;
        }
    }
    
    // Fetch weather from server
    async function fetchWeather() {
        try {
            const response = await fetch(`${SERVER_CONFIG.baseUrl}/mc/weather?city=${encodeURIComponent(SERVER_CONFIG.city)}`, {
                method: 'GET',
                headers: { 'Content-Type': 'application/json' }
            });
            
            if (!response.ok) {
                throw new Error(`Weather API responded with ${response.status}`);
            }
            
            const weatherData = await response.json();
            displayWeather(weatherData);
            
        } catch (error) {
            console.log('Weather fetch failed:', error.message);
            hideWeatherDisplay();
        }
    }
    
    // Display weather in header
    function displayWeather(data) {
        const weatherDisplay = document.getElementById('weatherDisplay');
        const weatherIcon = document.getElementById('weatherIcon');
        const weatherTemp = document.getElementById('weatherTemp');
        const weatherCondition = document.getElementById('weatherCondition');
        
        if (!weatherDisplay || !data) return;
        
        // Map weather condition to emoji
        const conditionMap = {
            'clear': '☀️', 'sunny': '☀️', 'fair': '🌤️',
            'cloudy': '☁️', 'partly cloudy': '⛅', 'mostly cloudy': '☁️',
            'rain': '🌧️', 'showers': '🌦️', 'drizzle': '🌦️',
            'thunderstorm': '⛈️', 'snow': '❄️', 'fog': '🌫️'
        };
        
        const condition = (data.condition || '').toLowerCase();
        const icon = conditionMap[condition] || '🌡️';
        
        weatherIcon.textContent = icon;
        weatherTemp.textContent = `${Math.round(data.temperature || 0)}°`;
        weatherCondition.textContent = data.condition || '--';
        weatherDisplay.style.display = 'flex';
    }
    
    function hideWeatherDisplay() {
        const weatherDisplay = document.getElementById('weatherDisplay');
        if (weatherDisplay) weatherDisplay.style.display = 'none';
    }
    
    // Report activity to server
    async function reportActivityToServer(description) {
        if (!serverState.isOnline) return;
        
        try {
            await fetch(`${SERVER_CONFIG.baseUrl}/mc/activity`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    description: description,
                    timestamp: new Date().toISOString(),
                    source: 'mission-control'
                })
            });
        } catch (error) {
            console.log('Activity report failed (non-critical):', error.message);
        }
    }
    
    // Update server status UI
    function updateServerStatus(isOnline, statusText) {
        serverState.isOnline = isOnline;
        
        const serverStatusEl = document.getElementById('serverStatus');
        const serverStatusText = document.getElementById('serverStatusText');
        const syncStatusDot = document.getElementById('syncStatusDot');
        const syncStatusText = document.getElementById('syncStatusText');
        
        if (serverStatusEl) {
            serverStatusEl.classList.toggle('online', isOnline);
            serverStatusEl.classList.toggle('offline', !isOnline);
        }
        
        if (serverStatusText) {
            serverStatusText.textContent = `Server: ${statusText}`;
        }
        
        if (syncStatusDot) {
            syncStatusDot.classList.toggle('offline', !isOnline);
        }
        
        if (syncStatusText) {
            syncStatusText.textContent = isOnline ? 'Synced' : 'Local';
        }
    }
    
    // Check server health
    async function checkServerHealth() {
        try {
            const response = await fetch(`${SERVER_CONFIG.baseUrl}/mc/data`, {
                method: 'GET',
                headers: { 'Content-Type': 'application/json' }
            });
            
            if (response.ok && !serverState.isOnline) {
                // Reconnected
                updateServerStatus(true, 'Connected');
                syncToServer(); // Immediate sync on reconnect
            }
        } catch (error) {
            if (serverState.isOnline) {
                updateServerStatus(false, 'Offline');
            }
        }
    }
    
    // Wrapper for addActivity to also report to server
    const originalAddActivity = addActivity;
    addActivity = function(text, type = 'system') {
        // Call original function
        originalAddActivity(text, type);
        
        // Report to server
        reportActivityToServer(text);
    };
    
    // Helper to render all views
    function renderAll() {
        renderPriorities();
        renderKanban();
        renderActivities();
        renderAgents();
        renderDecisions();
        renderNotes();
        renderIdeas();
        renderMeetings();
        renderCalendar();
        updateDashboardMetrics();
    }
    
    // Update dashboard metrics
    function updateDashboardMetrics() {
        updateMetrics();
    }
    
    // Log activity helper
    function logActivity(description) {
        console.log(`[Mission Control] ${description}`);
    }

    // Update countdowns every minute
    setInterval(renderTodayMeetings, 60000);
</script>

</body>
</html>
